{"version":3,"sources":["../src/polyfills/custom-elements-native-shim.ts","../src/polyfills/submit-event.ts","../src/elements/frame_element.ts","../src/core/url.ts","../src/http/fetch_response.ts","../src/util.ts","../src/http/fetch_request.ts","../src/observers/appearance_observer.ts","../src/core/streams/stream_message.ts","../src/core/drive/form_submission.ts","../src/core/snapshot.ts","../src/core/frames/form_interceptor.ts","../src/core/view.ts","../src/core/frames/frame_view.ts","../src/core/frames/link_interceptor.ts","../src/core/bardo.ts","../src/core/renderer.ts","../src/core/frames/frame_renderer.ts","../src/core/drive/progress_bar.ts","../src/core/drive/head_snapshot.ts","../src/core/drive/page_snapshot.ts","../src/core/drive/visit.ts","../src/core/native/browser_adapter.ts","../src/observers/cache_observer.ts","../src/observers/form_submit_observer.ts","../src/core/frames/frame_redirector.ts","../src/core/drive/history.ts","../src/observers/link_click_observer.ts","../src/core/types.ts","../src/core/drive/navigator.ts","../src/observers/page_observer.ts","../src/observers/scroll_observer.ts","../src/observers/stream_observer.ts","../src/core/drive/error_renderer.ts","../src/core/drive/page_renderer.ts","../src/core/drive/snapshot_cache.ts","../src/core/drive/page_view.ts","../src/core/session.ts","../src/core/index.ts","../src/core/frames/frame_controller.ts","../src/core/streams/stream_actions.ts","../src/elements/stream_element.ts","../src/elements/index.ts","../src/script_warning.ts","../src/index.ts","../src/event_listener.ts","../src/dispatcher.ts","../src/action_descriptor.ts","../src/action.ts","../src/binding.ts","../src/element_observer.ts","../src/attribute_observer.ts","../src/string_map_observer.ts","../src/set_operations.ts","../src/multimap.ts","../src/indexed_multimap.ts","../src/token_list_observer.ts","../src/value_list_observer.ts","../src/binding_observer.ts","../src/value_observer.ts","../src/context.ts","../src/inheritable_statics.ts","../src/blessing.ts","../src/definition.ts","../src/module.ts","../src/class_map.ts","../src/string_helpers.ts","../src/data_map.ts","../src/guide.ts","../src/selectors.ts","../src/target_set.ts","../src/scope.ts","../src/scope_observer.ts","../src/router.ts","../src/schema.ts","../src/application.ts","../src/class_properties.ts","../src/target_properties.ts","../src/value_properties.ts","../src/controller.ts","../node_modules/stimulus/index.js","../node_modules/stimulus/webpack-helpers.js","../src/js/app.js","../../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Turbo.start","application","Application","start","context","require","load","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"app.js","sourceRoot":"../src/js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt The complete set of authors may be found\n * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may\n * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by\n * Google as part of the polymer project is also subject to an additional IP\n * rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n(function() {\n  if (\n      // No Reflect, no classes, no need for shim because native custom elements\n      // require ES2015 classes or Reflect.\n      window.Reflect === undefined || window.customElements === undefined ||\n      // The webcomponentsjs custom elements polyfill doesn't require\n      // ES2015-compatible construction (`super()` or `Reflect.construct`).\n      (window.customElements as any).polyfillWrapFlushCallback) {\n    return;\n  }\n  const BuiltInHTMLElement = HTMLElement;\n\n  /**\n   * With jscompiler's RECOMMENDED_FLAGS the function name will be optimized away.\n   * However, if we declare the function as a property on an object literal, and\n   * use quotes for the property name, then closure will leave that much intact,\n   * which is enough for the JS VM to correctly set Function.prototype.name.\n   */\n  const wrapperForTheName = {\n    'HTMLElement': function HTMLElement(this: HTMLElement) {\n      return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n    }\n  };\n  window.HTMLElement =\n      wrapperForTheName['HTMLElement'] as unknown as typeof HTMLElement;\n  HTMLElement.prototype = BuiltInHTMLElement.prototype;\n  HTMLElement.prototype.constructor = HTMLElement;\n  Object.setPrototypeOf(HTMLElement, BuiltInHTMLElement);\n  })();\n","type FormSubmitter = HTMLElement & { form?: HTMLFormElement, type?: string }\n\nconst submittersByForm: WeakMap<HTMLFormElement, HTMLElement> = new WeakMap\n\nfunction findSubmitterFromClickTarget(target: EventTarget | null): FormSubmitter | null {\n  const element = target instanceof Element ? target : target instanceof Node ? target.parentElement : null\n  const candidate = element ? element.closest(\"input, button\") as FormSubmitter | null : null\n  return candidate?.type == \"submit\" ? candidate : null\n}\n\nfunction clickCaptured(event: Event) {\n  const submitter = findSubmitterFromClickTarget(event.target)\n\n  if (submitter && submitter.form) {\n    submittersByForm.set(submitter.form, submitter)\n  }\n}\n\n(function() {\n  if (\"SubmitEvent\" in window) return\n\n  addEventListener(\"click\", clickCaptured, true)\n\n  Object.defineProperty(Event.prototype, \"submitter\", {\n    get(): HTMLElement | undefined {\n      if (this.type == \"submit\" && this.target instanceof HTMLFormElement) {\n        return submittersByForm.get(this.target)\n      }\n    }\n  })\n})()\n","import { FetchResponse } from \"../http/fetch_response\"\n\nexport enum FrameLoadingStyle { eager = \"eager\", lazy = \"lazy\" }\n\nexport interface FrameElementDelegate {\n  connect(): void\n  disconnect(): void\n  loadingStyleChanged(): void\n  sourceURLChanged(): void\n  disabledChanged(): void\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement): void\n  loadResponse(response: FetchResponse): void\n  isLoading: boolean\n}\n\nexport class FrameElement extends HTMLElement {\n  static delegateConstructor: new (element: FrameElement) => FrameElementDelegate\n\n  loaded: Promise<FetchResponse | void> = Promise.resolve()\n  readonly delegate: FrameElementDelegate\n\n  static get observedAttributes() {\n    return [\"disabled\", \"loading\", \"src\"]\n  }\n\n  constructor() {\n    super()\n    this.delegate = new FrameElement.delegateConstructor(this)\n  }\n\n  connectedCallback() {\n    this.delegate.connect()\n  }\n\n  disconnectedCallback() {\n    this.delegate.disconnect()\n  }\n\n  reload() {\n    const { src } = this;\n    this.src = null;\n    this.src = src;\n  }\n\n  attributeChangedCallback(name: string) {\n    if (name == \"loading\") {\n      this.delegate.loadingStyleChanged()\n    } else if (name == \"src\") {\n      this.delegate.sourceURLChanged()\n    } else {\n      this.delegate.disabledChanged()\n    }\n  }\n\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  set src(value: string | null) {\n    if (value) {\n      this.setAttribute(\"src\", value)\n    } else {\n      this.removeAttribute(\"src\")\n    }\n  }\n\n  get loading(): FrameLoadingStyle {\n    return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\")\n  }\n\n  set loading(value: FrameLoadingStyle) {\n    if (value) {\n      this.setAttribute(\"loading\", value)\n    } else {\n      this.removeAttribute(\"loading\")\n    }\n  }\n\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\")\n    } else {\n      this.removeAttribute(\"disabled\")\n    }\n  }\n\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  set autoscroll(value: boolean) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\")\n    } else {\n      this.removeAttribute(\"autoscroll\")\n    }\n  }\n\n  get complete() {\n    return !this.delegate.isLoading\n  }\n\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\nfunction frameLoadingStyleFromString(style: string) {\n  switch (style.toLowerCase()) {\n    case \"lazy\":  return FrameLoadingStyle.lazy\n    default:      return FrameLoadingStyle.eager\n  }\n}\n","export type Locatable = URL | string\n\nexport function expandURL(locatable: Locatable) {\n  return new URL(locatable.toString(), document.baseURI)\n}\n\nexport function getAnchor(url: URL) {\n  let anchorMatch\n  if (url.hash) {\n    return url.hash.slice(1)\n  } else if (anchorMatch = url.href.match(/#(.*)$/)) {\n    return anchorMatch[1]\n  }\n}\n\nexport function getExtension(url: URL) {\n  return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\"\n}\n\nexport function isHTML(url: URL) {\n  return !!getExtension(url).match(/^(?:|\\.(?:htm|html|xhtml))$/)\n}\n\nexport function isPrefixedBy(baseURL: URL, url: URL) {\n  const prefix = getPrefix(url)\n  return baseURL.href === expandURL(prefix).href || baseURL.href.startsWith(prefix)\n}\n\nexport function getRequestURL(url: URL) {\n  const anchor = getAnchor(url)\n  return anchor != null\n    ? url.href.slice(0, -(anchor.length + 1))\n    : url.href\n}\n\nexport function toCacheKey(url: URL) {\n  return getRequestURL(url)\n}\n\nexport function urlsAreEqual(left: string, right: string) {\n  return expandURL(left).href == expandURL(right).href\n}\n\nfunction getPathComponents(url: URL) {\n  return url.pathname.split(\"/\").slice(1)\n}\n\nfunction getLastPathComponent(url: URL) {\n  return getPathComponents(url).slice(-1)[0]\n}\n\nfunction getPrefix(url: URL) {\n  return addTrailingSlash(url.origin + url.pathname)\n}\n\nfunction addTrailingSlash(value: string) {\n  return value.endsWith(\"/\") ? value : value + \"/\"\n}\n","import { expandURL } from \"../core/url\"\n\nexport class FetchResponse {\n  readonly response: Response\n\n  constructor(response: Response) {\n    this.response = response\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get clientError() {\n    return this.statusCode >= 400 && this.statusCode <= 499\n  }\n\n  get serverError() {\n    return this.statusCode >= 500 && this.statusCode <= 599\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location(): URL {\n    return expandURL(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText(): Promise<string> {\n    return this.response.text()\n  }\n\n  get responseHTML(): Promise<string | undefined> {\n    if (this.isHTML) {\n      return this.response.text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name: string) {\n    return this.response.headers.get(name)\n  }\n}\n","export type DispatchOptions = { target: EventTarget, cancelable: boolean, detail: any }\n\nexport function dispatch(eventName: string, { target, cancelable, detail }: Partial<DispatchOptions> = {}) {\n  const event = new CustomEvent(eventName, { cancelable, bubbles: true, detail })\n  void (target || document.documentElement).dispatchEvent(event)\n  return event\n}\n\nexport function nextAnimationFrame() {\n  return new Promise<void>(resolve => requestAnimationFrame(() => resolve()))\n}\n\nexport function nextEventLoopTick() {\n  return new Promise<void>(resolve => setTimeout(() => resolve(), 0))\n}\n\nexport function nextMicrotask() {\n  return Promise.resolve()\n}\n\nexport function parseHTMLDocument(html = \"\") {\n  return new DOMParser().parseFromString(html, \"text/html\")\n}\n\nexport function unindent(strings: TemplateStringsArray, ...values: any[]): string {\n  const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\")\n  const match = lines[0].match(/^\\s+/)\n  const indent = match ? match[0].length : 0\n  return lines.map(line => line.slice(indent)).join(\"\\n\")\n}\n\nfunction interpolate(strings: TemplateStringsArray, values: any[]) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i]\n    return result + string + value\n  }, \"\")\n}\n\nexport function uuid() {\n  return Array.apply(null, { length: 36 } as any).map((_, i) => {\n    if (i == 8 || i == 13 || i == 18 || i == 23) {\n      return \"-\"\n    } else if (i == 14) {\n      return \"4\"\n    } else if (i == 19) {\n      return (Math.floor(Math.random() * 4) + 8).toString(16)\n    } else {\n      return Math.floor(Math.random() * 15).toString(16)\n    }\n  }).join(\"\")\n}\n","import { FetchResponse } from \"./fetch_response\"\nimport { dispatch } from \"../util\"\n\nexport interface FetchRequestDelegate {\n  referrer?: URL\n\n  prepareHeadersForRequest?(headers: FetchRequestHeaders, request: FetchRequest): void\n  requestStarted(request: FetchRequest): void\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse): void\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse): void\n  requestErrored(request: FetchRequest, error: Error): void\n  requestFinished(request: FetchRequest): void\n}\n\nexport enum FetchMethod {\n  get,\n  post,\n  put,\n  patch,\n  delete\n}\n\nexport function fetchMethodFromString(method: string) {\n  switch (method.toLowerCase()) {\n    case \"get\":    return FetchMethod.get\n    case \"post\":   return FetchMethod.post\n    case \"put\":    return FetchMethod.put\n    case \"patch\":  return FetchMethod.patch\n    case \"delete\": return FetchMethod.delete\n  }\n}\n\nexport type FetchRequestBody = FormData | URLSearchParams\n\nexport type FetchRequestHeaders = { [header: string]: string }\n\nexport interface FetchRequestOptions {\n  headers: FetchRequestHeaders\n  body: FetchRequestBody\n  followRedirects: boolean\n}\n\nexport class FetchRequest {\n  readonly delegate: FetchRequestDelegate\n  readonly method: FetchMethod\n  readonly headers: FetchRequestHeaders\n  readonly url: URL\n  readonly body?: FetchRequestBody\n  readonly abortController = new AbortController\n  private resolveRequestPromise = (value: any) => {}\n\n  constructor(delegate: FetchRequestDelegate, method: FetchMethod, location: URL, body: FetchRequestBody = new URLSearchParams) {\n    this.delegate = delegate\n    this.method = method\n    this.headers = this.defaultHeaders\n    if (this.isIdempotent) {\n      this.url = mergeFormDataEntries(location, [ ...body.entries() ])\n    } else {\n      this.body = body\n      this.url = location\n    }\n  }\n\n  get location(): URL {\n    return this.url\n  }\n\n  get params(): URLSearchParams {\n    return this.url.searchParams\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort()\n  }\n\n  async perform(): Promise<FetchResponse | void> {\n    const { fetchOptions } = this\n    this.delegate.prepareHeadersForRequest?.(this.headers, this)\n    await this.allowRequestToBeIntercepted(fetchOptions)\n    try {\n      this.delegate.requestStarted(this)\n      const response = await fetch(this.url.href, fetchOptions)\n      return await this.receive(response)\n    } catch (error) {\n      if (error.name !== 'AbortError') {\n        this.delegate.requestErrored(this, error)\n        throw error\n      }\n    } finally {\n      this.delegate.requestFinished(this)\n    }\n  }\n\n  async receive(response: Response): Promise<FetchResponse> {\n    const fetchResponse = new FetchResponse(response)\n    const event = dispatch(\"turbo:before-fetch-response\", { cancelable: true, detail: { fetchResponse } })\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse)\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse)\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse)\n    }\n    return fetchResponse\n  }\n\n  get fetchOptions(): RequestInit {\n    return {\n      method: FetchMethod[this.method].toUpperCase(),\n      credentials: \"same-origin\",\n      headers: this.headers,\n      redirect: \"follow\",\n      body: this.body,\n      signal: this.abortSignal,\n      referrer: this.delegate.referrer?.href\n    }\n  }\n\n  get defaultHeaders() {\n    return {\n      \"Accept\": \"text/html, application/xhtml+xml\"\n    }\n  }\n\n  get isIdempotent() {\n    return this.method == FetchMethod.get\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n\n  private async allowRequestToBeIntercepted(fetchOptions: RequestInit) {\n    const requestInterception = new Promise(resolve => this.resolveRequestPromise = resolve)\n    const event = dispatch(\"turbo:before-fetch-request\", { cancelable: true, detail: { fetchOptions, url: this.url.href, resume: this.resolveRequestPromise } })\n    if (event.defaultPrevented) await requestInterception\n  }\n}\n\nfunction mergeFormDataEntries(url: URL, entries: [string, FormDataEntryValue][]): URL {\n  const currentSearchParams = new URLSearchParams(url.search)\n\n  for (const [ name, value ] of entries) {\n    if (value instanceof File) continue\n\n    if (currentSearchParams.has(name)) {\n      currentSearchParams.delete(name)\n      url.searchParams.set(name, value)\n    } else {\n      url.searchParams.append(name, value)\n    }\n  }\n\n  return url\n}\n","export interface AppearanceObserverDelegate {\n  elementAppearedInViewport(element: Element): void\n}\n\nexport class AppearanceObserver {\n  readonly delegate: AppearanceObserverDelegate\n  readonly element: Element\n  readonly intersectionObserver: IntersectionObserver\n  started = false\n\n  constructor(delegate: AppearanceObserverDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n    this.intersectionObserver = new IntersectionObserver(this.intersect)\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.intersectionObserver.observe(this.element)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      this.intersectionObserver.unobserve(this.element)\n    }\n  }\n\n  intersect: IntersectionObserverCallback = entries => {\n    const lastEntry = entries.slice(-1)[0]\n    if (lastEntry?.isIntersecting) {\n      this.delegate.elementAppearedInViewport(this.element)\n    }\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport class StreamMessage {\n  static readonly contentType = \"text/vnd.turbo-stream.html\"\n  readonly templateElement = document.createElement(\"template\")\n\n  static wrap(message: StreamMessage | string) {\n    if (typeof message == \"string\") {\n      return new this(message)\n    } else {\n      return message\n    }\n  }\n\n  constructor(html: string) {\n    this.templateElement.innerHTML = html\n  }\n\n  get fragment() {\n    const fragment = document.createDocumentFragment()\n    for (const element of this.foreignElements) {\n      fragment.appendChild(document.importNode(element, true))\n    }\n    return fragment\n  }\n\n  get foreignElements() {\n    return this.templateChildren.reduce((streamElements, child) => {\n      if (child.tagName.toLowerCase() == \"turbo-stream\") {\n        return [ ...streamElements, child as StreamElement ]\n      } else {\n        return streamElements\n      }\n    }, [] as StreamElement[])\n  }\n\n  get templateChildren() {\n    return Array.from(this.templateElement.content.children)\n  }\n}\n","import { FetchRequest, FetchMethod, fetchMethodFromString, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { expandURL } from \"../url\"\nimport { dispatch } from \"../../util\"\nimport { StreamMessage } from \"../streams/stream_message\"\n\nexport interface FormSubmissionDelegate {\n  formSubmissionStarted(formSubmission: FormSubmission): void\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse): void\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error): void\n  formSubmissionFinished(formSubmission: FormSubmission): void\n}\n\nexport type FormSubmissionResult\n  = { success: boolean, fetchResponse: FetchResponse }\n  | { success: false, error: Error }\n\nexport enum FormSubmissionState {\n  initialized,\n  requesting,\n  waiting,\n  receiving,\n  stopping,\n  stopped,\n}\n\nenum FormEnctype {\n  urlEncoded = \"application/x-www-form-urlencoded\",\n  multipart  = \"multipart/form-data\",\n  plain      = \"text/plain\"\n}\n\nfunction formEnctypeFromString(encoding: string): FormEnctype {\n  switch(encoding.toLowerCase()) {\n    case FormEnctype.multipart: return FormEnctype.multipart\n    case FormEnctype.plain:     return FormEnctype.plain\n    default:                    return FormEnctype.urlEncoded\n  }\n}\n\nexport class FormSubmission {\n  readonly delegate: FormSubmissionDelegate\n  readonly formElement: HTMLFormElement\n  readonly submitter?: HTMLElement\n  readonly formData: FormData\n  readonly fetchRequest: FetchRequest\n  readonly mustRedirect: boolean\n  state = FormSubmissionState.initialized\n  result?: FormSubmissionResult\n\n  constructor(delegate: FormSubmissionDelegate, formElement: HTMLFormElement, submitter?: HTMLElement, mustRedirect = false) {\n    this.delegate = delegate\n    this.formElement = formElement\n    this.submitter = submitter\n    this.formData = buildFormData(formElement, submitter)\n    this.fetchRequest = new FetchRequest(this, this.method, this.location, this.body)\n    this.mustRedirect = mustRedirect\n  }\n\n  get method(): FetchMethod {\n    const method = this.submitter?.getAttribute(\"formmethod\") || this.formElement.getAttribute(\"method\") || \"\"\n    return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n  }\n\n  get action(): string {\n    const formElementAction = typeof this.formElement.action === 'string' ? this.formElement.action : null\n    return this.submitter?.getAttribute(\"formaction\") || this.formElement.getAttribute(\"action\") || formElementAction || \"\"\n  }\n\n  get location(): URL {\n    return expandURL(this.action)\n  }\n\n  get body() {\n    if (this.enctype == FormEnctype.urlEncoded || this.method == FetchMethod.get) {\n      return new URLSearchParams(this.stringFormData)\n    } else {\n      return this.formData\n    }\n  }\n\n  get enctype(): FormEnctype {\n    return formEnctypeFromString(this.submitter?.getAttribute(\"formenctype\") || this.formElement.enctype)\n  }\n\n  get isIdempotent() {\n    return this.fetchRequest.isIdempotent\n  }\n\n  get stringFormData() {\n    return [ ...this.formData ].reduce((entries, [ name, value ]) => {\n      return entries.concat(typeof value == \"string\" ? [[ name, value ]] : [])\n    }, [] as [string, string][])\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState\n    if (this.state == initialized) {\n      this.state = requesting\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping\n      this.fetchRequest.cancel()\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, request: FetchRequest) {\n    if (!request.isIdempotent) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\")\n      if (token) {\n        headers[\"X-CSRF-Token\"] = token\n      }\n      headers[\"Accept\"] = [ StreamMessage.contentType, headers[\"Accept\"] ].join(\", \")\n    }\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.state = FormSubmissionState.waiting\n    dispatch(\"turbo:submit-start\", { target: this.formElement, detail: { formSubmission: this } })\n    this.delegate.formSubmissionStarted(this)\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: response.succeeded, fetchResponse: response }\n  }\n\n  requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    if (response.clientError || response.serverError) {\n      this.delegate.formSubmissionFailedWithResponse(this, response)\n    } else if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n      const error = new Error(\"Form responses must redirect to another location\")\n      this.delegate.formSubmissionErrored(this, error)\n    } else {\n      this.state = FormSubmissionState.receiving\n      this.result = { success: true, fetchResponse: response }\n      this.delegate.formSubmissionSucceededWithResponse(this, response)\n    }\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    this.result = { success: false, fetchResponse: response }\n    this.delegate.formSubmissionFailedWithResponse(this, response)\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.result = { success: false, error }\n    this.delegate.formSubmissionErrored(this, error)\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.state = FormSubmissionState.stopped\n    dispatch(\"turbo:submit-end\", { target: this.formElement, detail: { formSubmission: this, ...this.result }})\n    this.delegate.formSubmissionFinished(this)\n  }\n\n  requestMustRedirect(request: FetchRequest) {\n    return !request.isIdempotent && this.mustRedirect\n  }\n}\n\nfunction buildFormData(formElement: HTMLFormElement, submitter?: HTMLElement): FormData {\n  const formData = new FormData(formElement)\n  const name = submitter?.getAttribute(\"name\")\n  const value = submitter?.getAttribute(\"value\")\n\n  if (name && value != null && formData.get(name) != value) {\n    formData.append(name, value)\n  }\n\n  return formData\n}\n\nfunction getCookieValue(cookieName: string | null) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : []\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName))\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\")\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction getMetaContent(name: string) {\n  const element: HTMLMetaElement | null = document.querySelector(`meta[name=\"${name}\"]`)\n  return element && element.content\n}\n\nfunction responseSucceededWithoutRedirect(response: FetchResponse) {\n  return response.statusCode == 200 && !response.redirected\n}\n","export class Snapshot<E extends Element = Element> {\n  readonly element: E\n\n  constructor(element: E) {\n    this.element = element\n  }\n\n  get children() {\n    return [ ...this.element.children ]\n  }\n\n  hasAnchor(anchor: string | undefined) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  getElementForAnchor(anchor: string | undefined) {\n    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null\n  }\n\n  get isConnected() {\n    return this.element.isConnected\n  }\n\n  get firstAutofocusableElement() {\n    return this.element.querySelector(\"[autofocus]\")\n  }\n\n  get permanentElements() {\n    return [ ...this.element.querySelectorAll(\"[id][data-turbo-permanent]\") ]\n  }\n\n  getPermanentElementById(id: string) {\n    return this.element.querySelector(`#${id}[data-turbo-permanent]`)\n  }\n\n  getPermanentElementMapForSnapshot(snapshot: Snapshot) {\n    const permanentElementMap: PermanentElementMap = {}\n\n    for (const currentPermanentElement of this.permanentElements) {\n      const { id } = currentPermanentElement\n      const newPermanentElement = snapshot.getPermanentElementById(id)\n      if (newPermanentElement) {\n        permanentElementMap[id] = [ currentPermanentElement, newPermanentElement ]\n      }\n    }\n\n    return permanentElementMap\n  }\n}\n\nexport type PermanentElementMap = Record<string, [Element, Element]>\n","export interface FormInterceptorDelegate {\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: HTMLElement): boolean\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement): void\n}\n\nexport class FormInterceptor {\n  readonly delegate: FormInterceptorDelegate\n  readonly element: Element\n\n  constructor(delegate: FormInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"submit\", this.submitBubbled)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"submit\", this.submitBubbled)\n  }\n\n  submitBubbled = <EventListener>((event: SubmitEvent) => {\n    if (event.target instanceof HTMLFormElement) {\n      const form = event.target\n      const submitter = event.submitter || undefined\n      if (this.delegate.shouldInterceptFormSubmission(form, submitter)) {\n        event.preventDefault()\n        event.stopImmediatePropagation()\n        this.delegate.formSubmissionIntercepted(form, submitter)\n      }\n    }\n  })\n}\n","import { Renderer } from \"./renderer\"\nimport { Snapshot } from \"./snapshot\"\nimport { Position } from \"./types\"\nimport { getAnchor } from \"./url\"\n\nexport interface ViewDelegate<S extends Snapshot> {\n  allowsImmediateRender(snapshot: S, resume: (value: any) => void): boolean\n  viewRenderedSnapshot(snapshot: S, isPreview: boolean): void\n  viewInvalidated(): void\n}\n\nexport abstract class View<E extends Element, S extends Snapshot<E> = Snapshot<E>, R extends Renderer<E, S> = Renderer<E, S>, D extends ViewDelegate<S> = ViewDelegate<S>> {\n  readonly delegate: D\n  readonly element: E\n  renderer?: R\n  abstract readonly snapshot: S\n  renderPromise?: Promise<void>\n  private resolveRenderPromise = (value: any) => {}\n  private resolveInterceptionPromise = (value: any) => {}\n\n  constructor(delegate: D, element: E) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor: string | undefined) {\n    const element = this.snapshot.getElementForAnchor(anchor)\n    if (element) {\n      this.scrollToElement(element)\n      this.focusElement(element)\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 })\n    }\n  }\n\n  scrollToAnchorFromLocation(location: URL) {\n    this.scrollToAnchor(getAnchor(location))\n  }\n\n  scrollToElement(element: Element) {\n    element.scrollIntoView()\n  }\n\n  focusElement(element: Element) {\n    if (element instanceof HTMLElement) {\n      if (element.hasAttribute(\"tabindex\")) {\n        element.focus()\n      } else {\n        element.setAttribute(\"tabindex\", \"-1\")\n        element.focus()\n        element.removeAttribute(\"tabindex\")\n      }\n    }\n  }\n\n  scrollToPosition({ x, y }: Position) {\n    this.scrollRoot.scrollTo(x, y)\n  }\n\n  scrollToTop() {\n    this.scrollToPosition({ x: 0, y: 0 })\n  }\n\n  get scrollRoot(): { scrollTo(x: number, y: number): void } {\n    return window\n  }\n\n  // Rendering\n\n  async render(renderer: R) {\n    const { isPreview, shouldRender, newSnapshot: snapshot } = renderer\n    if (shouldRender) {\n      try {\n        this.renderPromise = new Promise(resolve => this.resolveRenderPromise = resolve)\n        this.renderer = renderer\n        this.prepareToRenderSnapshot(renderer)\n\n        const renderInterception = new Promise(resolve => this.resolveInterceptionPromise = resolve)\n        const immediateRender = this.delegate.allowsImmediateRender(snapshot, this.resolveInterceptionPromise)\n        if (!immediateRender) await renderInterception\n\n        await this.renderSnapshot(renderer)\n        this.delegate.viewRenderedSnapshot(snapshot, isPreview)\n        this.finishRenderingSnapshot(renderer)\n      } finally {\n        delete this.renderer\n        this.resolveRenderPromise(undefined)\n        delete this.renderPromise\n      }\n    } else {\n      this.invalidate()\n    }\n  }\n\n  invalidate() {\n    this.delegate.viewInvalidated()\n  }\n\n  prepareToRenderSnapshot(renderer: R) {\n    this.markAsPreview(renderer.isPreview)\n    renderer.prepareToRender()\n  }\n\n  markAsPreview(isPreview: boolean) {\n    if (isPreview) {\n      this.element.setAttribute(\"data-turbo-preview\", \"\")\n    } else {\n      this.element.removeAttribute(\"data-turbo-preview\")\n    }\n  }\n\n  async renderSnapshot(renderer: R) {\n    await renderer.render()\n  }\n\n  finishRenderingSnapshot(renderer: R) {\n    renderer.finishRendering()\n  }\n}\n","import { FrameElement } from \"../../elements\"\nimport { Snapshot } from \"../snapshot\"\nimport { View } from \"../view\"\n\nexport class FrameView extends View<FrameElement> {\n  invalidate() {\n    this.element.innerHTML = \"\"\n  }\n\n  get snapshot() {\n    return new Snapshot(this.element)\n  }\n}\n","export interface LinkInterceptorDelegate {\n  shouldInterceptLinkClick(element: Element, url: string): boolean\n  linkClickIntercepted(element: Element, url: string): void\n}\n\nexport class LinkInterceptor {\n  readonly delegate: LinkInterceptorDelegate\n  readonly element: Element\n  private clickEvent?: Event\n\n  constructor(delegate: LinkInterceptorDelegate, element: Element) {\n    this.delegate = delegate\n    this.element = element\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled)\n    document.addEventListener(\"turbo:click\", this.linkClicked)\n    document.addEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled)\n    document.removeEventListener(\"turbo:click\", this.linkClicked)\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit)\n  }\n\n  clickBubbled = (event: Event) => {\n    if (this.respondsToEventTarget(event.target)) {\n      this.clickEvent = event\n    } else {\n      delete this.clickEvent\n    }\n  }\n\n  linkClicked = <EventListener>((event: CustomEvent) => {\n    if (this.clickEvent && this.respondsToEventTarget(event.target) && event.target instanceof Element) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url)) {\n        this.clickEvent.preventDefault()\n        event.preventDefault()\n        this.delegate.linkClickIntercepted(event.target, event.detail.url)\n      }\n    }\n    delete this.clickEvent\n  })\n\n  willVisit = () => {\n    delete this.clickEvent\n  }\n\n  respondsToEventTarget(target: EventTarget | null) {\n    const element\n      = target instanceof Element\n      ? target\n        : target instanceof Node\n        ? target.parentElement\n          : null\n    return element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n","import { PermanentElementMap } from \"./snapshot\"\n\nexport class Bardo {\n  readonly permanentElementMap: PermanentElementMap\n\n  static preservingPermanentElements(permanentElementMap: PermanentElementMap, callback: () => void) {\n    const bardo = new this(permanentElementMap)\n    bardo.enter()\n    callback()\n    bardo.leave()\n  }\n\n  constructor(permanentElementMap: PermanentElementMap) {\n    this.permanentElementMap = permanentElementMap\n  }\n\n  enter() {\n    for (const id in this.permanentElementMap) {\n      const [, newPermanentElement ] = this.permanentElementMap[id]\n      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement)\n    }\n  }\n\n  leave() {\n    for (const id in this.permanentElementMap) {\n      const [ currentPermanentElement ] = this.permanentElementMap[id]\n      this.replaceCurrentPermanentElementWithClone(currentPermanentElement)\n      this.replacePlaceholderWithPermanentElement(currentPermanentElement)\n    }\n  }\n\n  replaceNewPermanentElementWithPlaceholder(permanentElement: Element) {\n    const placeholder = createPlaceholderForPermanentElement(permanentElement)\n    permanentElement.replaceWith(placeholder)\n  }\n\n  replaceCurrentPermanentElementWithClone(permanentElement: Element) {\n    const clone = permanentElement.cloneNode(true)\n    permanentElement.replaceWith(clone)\n  }\n\n  replacePlaceholderWithPermanentElement(permanentElement: Element) {\n    const placeholder = this.getPlaceholderById(permanentElement.id)\n    placeholder?.replaceWith(permanentElement)\n  }\n\n  getPlaceholderById(id: string) {\n    return this.placeholders.find(element => element.content == id)\n  }\n\n  get placeholders(): HTMLMetaElement[] {\n    return [ ...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\") ] as any\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement: Element) {\n  const element = document.createElement(\"meta\")\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\")\n  element.setAttribute(\"content\", permanentElement.id)\n  return element\n}\n","import { Bardo } from \"./bardo\"\nimport { Snapshot } from \"./snapshot\"\n\ntype ResolvingFunctions<T = unknown> = {\n  resolve(value: T | PromiseLike<T>): void\n  reject(reason?: any): void\n}\n\nexport abstract class Renderer<E extends Element, S extends Snapshot<E> = Snapshot<E>> {\n  readonly currentSnapshot: S\n  readonly newSnapshot: S\n  readonly isPreview: boolean\n  readonly promise: Promise<void>\n  private resolvingFunctions?: ResolvingFunctions<void>\n\n  constructor(currentSnapshot: S, newSnapshot: S, isPreview: boolean) {\n    this.currentSnapshot = currentSnapshot\n    this.newSnapshot = newSnapshot\n    this.isPreview = isPreview\n    this.promise = new Promise((resolve, reject) => this.resolvingFunctions = { resolve, reject })\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  prepareToRender() {\n    return\n  }\n\n  abstract render(): Promise<void>\n\n  finishRendering() {\n    if (this.resolvingFunctions) {\n      this.resolvingFunctions.resolve()\n      delete this.resolvingFunctions\n    }\n  }\n\n  createScriptElement(element: Element) {\n    if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n      return element\n    } else {\n      const createdScriptElement = document.createElement(\"script\")\n      if (this.cspNonce) {\n        createdScriptElement.nonce = this.cspNonce\n      }\n      createdScriptElement.textContent = element.textContent\n      createdScriptElement.async = false\n      copyElementAttributes(createdScriptElement, element)\n      return createdScriptElement\n    }\n  }\n\n  preservingPermanentElements(callback: () => void) {\n    Bardo.preservingPermanentElements(this.permanentElementMap, callback)\n  }\n\n  focusFirstAutofocusableElement() {\n    const element = this.connectedSnapshot.firstAutofocusableElement\n    if (elementIsFocusable(element)) {\n      element.focus()\n    }\n  }\n\n  get connectedSnapshot() {\n    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot\n  }\n\n  get currentElement() {\n    return this.currentSnapshot.element\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  get permanentElementMap() {\n    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)\n  }\n\n  get cspNonce() {\n    return document.head.querySelector('meta[name=\"csp-nonce\"]')?.getAttribute(\"content\")\n  }\n}\n\nfunction copyElementAttributes(destinationElement: Element, sourceElement: Element) {\n  for (const { name, value } of [ ...sourceElement.attributes ]) {\n    destinationElement.setAttribute(name, value)\n  }\n}\n\nfunction elementIsFocusable(element: any): element is { focus: () => void } {\n  return element && typeof element.focus == \"function\"\n}\n","import { FrameElement } from \"../../elements/frame_element\"\nimport { nextAnimationFrame } from \"../../util\"\nimport { Renderer } from \"../renderer\"\n\nexport class FrameRenderer extends Renderer<FrameElement> {\n  get shouldRender() {\n    return true\n  }\n\n  async render() {\n    await nextAnimationFrame()\n    this.preservingPermanentElements(() => {\n      this.loadFrameElement()\n    })\n    this.scrollFrameIntoView()\n    await nextAnimationFrame()\n    this.focusFirstAutofocusableElement()\n    await nextAnimationFrame()\n    this.activateScriptElements()\n  }\n\n  loadFrameElement() {\n    const destinationRange = document.createRange()\n    destinationRange.selectNodeContents(this.currentElement)\n    destinationRange.deleteContents()\n\n    const frameElement = this.newElement\n    const sourceRange = frameElement.ownerDocument?.createRange()\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement)\n      this.currentElement.appendChild(sourceRange.extractContents())\n    }\n  }\n\n  scrollFrameIntoView() {\n    if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n      const element = this.currentElement.firstElementChild\n      const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\")\n\n      if (element) {\n        element.scrollIntoView({ block })\n        return true\n      }\n    }\n    return false\n  }\n\n  activateScriptElements() {\n    for (const inertScriptElement of this.newScriptElements) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      inertScriptElement.replaceWith(activatedScriptElement)\n    }\n  }\n\n  get newScriptElements() {\n    return this.currentElement.querySelectorAll(\"script\")\n  }  \n}\n\nfunction readScrollLogicalPosition(value: string | null, defaultValue: ScrollLogicalPosition): ScrollLogicalPosition {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n","import { unindent } from \"../../util\"\n\nexport class ProgressBar {\n  static animationDuration = 300/*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 9999;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  readonly stylesheetElement: HTMLStyleElement\n  readonly progressElement: HTMLDivElement\n\n  hiding = false\n  trickleInterval?: number\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement()\n    this.progressElement = this.createProgressElement()\n    this.installStylesheetElement()\n    this.setValue(0)\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true\n      this.installProgressElement()\n      this.startTrickling()\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement()\n        this.stopTrickling()\n        this.visible = false\n        this.hiding = false\n      })\n    }\n  }\n\n  setValue(value: number) {\n    this.value = value\n    this.refresh()\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild)\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\"\n    this.progressElement.style.opacity = \"1\"\n    document.documentElement.insertBefore(this.progressElement, document.body)\n    this.refresh()\n  }\n\n  fadeProgressElement(callback: () => void) {\n    this.progressElement.style.opacity = \"0\"\n    setTimeout(callback, ProgressBar.animationDuration * 1.5)\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement)\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration)\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval)\n    delete this.trickleInterval\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100)\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + (this.value * 90)}%`\n    })\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\")\n    element.type = \"text/css\"\n    element.textContent = ProgressBar.defaultCSS\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\")\n    element.className = \"turbo-progress-bar\"\n    return element\n  }\n}\n","import { Snapshot } from \"../snapshot\"\n\ntype ElementDetailMap = { [outerHTML: string]: ElementDetails }\n\ntype ElementDetails = { type?: ElementType, tracked: boolean, elements: Element[] }\n\ntype ElementType = \"script\" | \"stylesheet\"\n\nexport class HeadSnapshot extends Snapshot<HTMLHeadElement> {\n  readonly detailsByOuterHTML = this.children\n    .filter((element) => !elementIsNoscript(element))\n    .reduce((result, element) => {\n    const { outerHTML } = element\n    const details: ElementDetails\n      = outerHTML in result\n      ? result[outerHTML]\n      : {\n        type: elementType(element),\n        tracked: elementIsTracked(element),\n        elements: []\n      }\n    return {\n      ...result,\n      [outerHTML]: {\n        ...details,\n        elements: [ ...details.elements, element ]\n      }\n    }\n  }, {} as ElementDetailMap)\n\n  get trackedElementSignature(): string {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot)\n  }\n\n  getStylesheetElementsNotInSnapshot(snapshot: HeadSnapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot)\n  }\n\n  getElementsMatchingTypeNotInSnapshot(matchedType: ElementType, snapshot: HeadSnapshot) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter(outerHTML => !(outerHTML in snapshot.detailsByOuterHTML))\n      .map(outerHTML => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  get provisionalElements(): Element[] {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML]\n      if (type == null && !tracked) {\n        return [ ...result, ...elements ]\n      } else if (elements.length > 1) {\n        return [ ...result, ...elements.slice(1) ]\n      } else {\n        return result\n      }\n    }, [] as Element[])\n  }\n\n  getMetaValue(name: string): string | null {\n    const element = this.findMetaElementByName(name)\n    return element\n      ? element.getAttribute(\"content\")\n      : null\n  }\n\n  findMetaElementByName(name: string) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { elements: [element] } = this.detailsByOuterHTML[outerHTML]\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined as Element | undefined)\n  }\n}\n\nfunction elementType(element: Element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element: Element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"script\"\n}\n\nfunction elementIsNoscript(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"noscript\"\n}\n\nfunction elementIsStylesheet(element: Element) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element: Element, name: string) {\n  const tagName = element.tagName.toLowerCase()\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n","import { parseHTMLDocument } from \"../../util\"\nimport { Snapshot } from \"../snapshot\"\nimport { expandURL } from \"../url\"\nimport { HeadSnapshot } from \"./head_snapshot\"\n\nexport class PageSnapshot extends Snapshot<HTMLBodyElement> {\n  static fromHTMLString(html = \"\") {\n    return this.fromDocument(parseHTMLDocument(html))\n  }\n\n  static fromElement(element: Element) {\n    return this.fromDocument(element.ownerDocument)\n  }\n\n  static fromDocument({ head, body }: Document) {\n    return new this(body as HTMLBodyElement, new HeadSnapshot(head))\n  }\n\n  readonly headSnapshot: HeadSnapshot\n\n  constructor(element: HTMLBodyElement, headSnapshot: HeadSnapshot) {\n    super(element)\n    this.headSnapshot = headSnapshot\n  }\n\n  clone() {\n    return new PageSnapshot(this.element.cloneNode(true), this.headSnapshot)\n  }\n\n  get headElement() {\n    return this.headSnapshot.element\n  }\n\n  get rootLocation() {\n    const root = this.getSetting(\"root\") ?? \"/\"\n    return expandURL(root)\n  }\n\n  get cacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  get isPreviewable() {\n    return this.cacheControlValue != \"no-preview\"\n  }\n\n  get isCacheable() {\n    return this.cacheControlValue != \"no-cache\"\n  }\n\n  get isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  // Private\n\n  getSetting(name: string) {\n    return this.headSnapshot.getMetaValue(`turbo-${name}`)\n  }\n}\n","import { Adapter } from \"../native/adapter\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { History } from \"./history\"\nimport { getAnchor } from \"../url\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { Action } from \"../types\"\nimport { uuid } from \"../../util\"\nimport { PageView } from \"./page_view\"\n\nexport interface VisitDelegate {\n  readonly adapter: Adapter\n  readonly history: History\n  readonly view: PageView\n\n  visitStarted(visit: Visit): void\n  visitCompleted(visit: Visit): void\n  locationWithActionIsSamePage(location: URL, action: Action): boolean\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL): void\n}\n\nexport enum TimingMetric {\n  visitStart = \"visitStart\",\n  requestStart = \"requestStart\",\n  requestEnd = \"requestEnd\",\n  visitEnd = \"visitEnd\"\n}\n\nexport type TimingMetrics = Partial<{ [metric in TimingMetric]: any }>\n\nexport enum VisitState {\n  initialized = \"initialized\",\n  started = \"started\",\n  canceled = \"canceled\",\n  failed = \"failed\",\n  completed = \"completed\"\n}\n\nexport type VisitOptions = {\n  action: Action,\n  historyChanged: boolean,\n  referrer?: URL,\n  snapshotHTML?: string,\n  response?: VisitResponse\n}\n\nconst defaultOptions: VisitOptions = {\n  action: \"advance\",\n  historyChanged: false\n}\n\nexport type VisitResponse = {\n  statusCode: number,\n  responseHTML?: string\n}\n\nexport enum SystemStatusCode {\n  networkFailure = 0,\n  timeoutFailure = -1,\n  contentTypeMismatch = -2\n}\n\nexport class Visit implements FetchRequestDelegate {\n  readonly delegate: VisitDelegate\n  readonly identifier = uuid()\n  readonly restorationIdentifier: string\n  readonly action: Action\n  readonly referrer?: URL\n  readonly timingMetrics: TimingMetrics = {}\n\n  followedRedirect = false\n  frame?: number\n  historyChanged = false\n  location: URL\n  isSamePage: boolean\n  redirectedToLocation?: URL\n  request?: FetchRequest\n  response?: VisitResponse\n  scrolled = false\n  snapshotHTML?: string\n  snapshotCached = false\n  state = VisitState.initialized\n\n  constructor(delegate: VisitDelegate, location: URL, restorationIdentifier: string | undefined, options: Partial<VisitOptions> = {}) {\n    this.delegate = delegate\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier || uuid()\n\n    const { action, historyChanged, referrer, snapshotHTML, response } = { ...defaultOptions, ...options }\n    this.action = action\n    this.historyChanged = historyChanged\n    this.referrer = referrer\n    this.snapshotHTML = snapshotHTML\n    this.response = response\n    this.isSamePage = this.delegate.locationWithActionIsSamePage(this.location, this.action)\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  get silent() {\n    return this.isSamePage\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart)\n      this.state = VisitState.started\n      this.adapter.visitStarted(this)\n      this.delegate.visitStarted(this)\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel()\n      }\n      this.cancelRender()\n      this.state = VisitState.canceled\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd)\n      this.state = VisitState.completed\n      this.adapter.visitCompleted(this)\n      this.delegate.visitCompleted(this)\n      this.followRedirect()\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed\n      this.adapter.visitFailed(this)\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged) {\n      const actionForHistory = this.location.href === this.referrer?.href ? \"replace\" : this.action\n      const method = this.getHistoryMethodForAction(actionForHistory)\n      this.history.update(method, this.location, this.restorationIdentifier)\n      this.historyChanged = true\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest()\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location)\n      this.request.perform()\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest()\n      this.recordResponse()\n      this.finishRequest()\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart)\n    this.adapter.visitRequestStarted(this)\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response\n    if (response) {\n      const { statusCode } = response\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this)\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode)\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd)\n    this.adapter.visitRequestFinished(this)\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response\n      this.render(async () => {\n        this.cacheSnapshot()\n        if (this.view.renderPromise) await this.view.renderPromise\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          await this.view.renderPage(PageSnapshot.fromHTMLString(responseHTML))\n          this.adapter.visitRendered(this)\n          this.complete()\n        } else {\n          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML))\n          this.adapter.visitRendered(this)\n          this.fail()\n        }\n      })\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot()\n\n    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return PageSnapshot.fromHTMLString(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot()\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest()\n      this.render(async () => {\n        this.cacheSnapshot()\n        if (this.isSamePage) {\n          this.adapter.visitRendered(this)\n        } else {\n          if (this.view.renderPromise) await this.view.renderPromise\n          await this.view.renderPage(snapshot, isPreview)\n          this.adapter.visitRendered(this)\n          if (!isPreview) {\n            this.complete()\n          }\n        }\n      })\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect) {\n      this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n        action: 'replace',\n        response: this.response\n      })\n      this.followedRedirect = true\n    }\n  }\n\n  goToSamePageAnchor() {\n    if (this.isSamePage) {\n      this.render(async () => {\n        this.cacheSnapshot()\n        this.adapter.visitRendered(this)\n      })\n    }\n  }\n\n  // Fetch request delegate\n\n  requestStarted() {\n    this.startRequest()\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  async requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    const responseHTML = await response.responseHTML\n    if (responseHTML == undefined) {\n      this.recordResponse({ statusCode: SystemStatusCode.contentTypeMismatch })\n    } else {\n      this.recordResponse({ statusCode: response.statusCode, responseHTML })\n    }\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    this.recordResponse({ statusCode: SystemStatusCode.networkFailure })\n  }\n\n  requestFinished() {\n    this.finishRequest()\n  }\n\n  // Scrolling\n\n  performScroll() {\n    if (!this.scrolled) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop()\n      } else {\n        this.scrollToAnchor() || this.view.scrollToTop()\n      }\n      if (this.isSamePage) {\n        this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation, this.location)\n      }\n\n      this.scrolled = true\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition)\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    const anchor = getAnchor(this.location)\n    if (anchor != null) {\n      this.view.scrollToAnchor(anchor)\n      return true\n    }\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric: TimingMetric) {\n    this.timingMetrics[metric] = new Date().getTime()\n  }\n\n  getTimingMetrics(): TimingMetrics {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  getHistoryMethodForAction(action: Action) {\n    switch (action) {\n      case \"replace\": return history.replaceState\n      case \"advance\":\n      case \"restore\": return history.pushState\n    }\n  }\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    if (this.isSamePage) {\n      return false\n    } else if (this.action == \"restore\") {\n      return !this.hasCachedSnapshot()\n    } else {\n      return true\n    }\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot()\n      this.snapshotCached = true\n    }\n  }\n\n  async render(callback: () => Promise<void>) {\n    this.cancelRender()\n    await new Promise<void>(resolve => {\n      this.frame = requestAnimationFrame(() => resolve())\n    })\n    await callback()\n    delete this.frame\n    this.performScroll()\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame)\n      delete this.frame\n    }\n  }\n}\n\nfunction isSuccessful(statusCode: number) {\n  return statusCode >= 200 && statusCode < 300\n}\n","import { Adapter } from \"./adapter\"\nimport { ProgressBar } from \"../drive/progress_bar\"\nimport { SystemStatusCode, Visit, VisitOptions } from \"../drive/visit\"\nimport { FormSubmission } from \"../drive/form_submission\"\nimport { Session } from \"../session\"\nimport { uuid } from \"../../util\"\n\nexport class BrowserAdapter implements Adapter {\n  readonly session: Session\n  readonly progressBar = new ProgressBar\n\n  progressBarTimeout?: number\n\n  constructor(session: Session) {\n    this.session = session\n  }\n\n  visitProposedToLocation(location: URL, options?: Partial<VisitOptions>) {\n    this.navigator.startVisit(location, uuid(), options)\n  }\n\n  visitStarted(visit: Visit) {\n    visit.issueRequest()\n    visit.changeHistory()\n    visit.goToSamePageAnchor()\n    visit.loadCachedSnapshot()\n  }\n\n  visitRequestStarted(visit: Visit) {\n    this.progressBar.setValue(0)\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showProgressBarAfterDelay()\n    } else {\n      this.showProgressBar()\n    }\n  }\n\n  visitRequestCompleted(visit: Visit) {\n    visit.loadResponse()\n  }\n\n  visitRequestFailedWithStatusCode(visit: Visit, statusCode: number) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload()\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(visit: Visit) {\n    this.progressBar.setValue(1)\n    this.hideProgressBar()\n  }\n\n  visitCompleted(visit: Visit) {\n\n  }\n\n  pageInvalidated() {\n    this.reload()\n  }\n\n  visitFailed(visit: Visit) {\n\n  }\n\n  visitRendered(visit: Visit) {\n\n  }\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n    this.progressBar.setValue(0)\n    this.showProgressBarAfterDelay()\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n    this.progressBar.setValue(1)\n    this.hideProgressBar()\n  }\n\n  // Private\n\n  showProgressBarAfterDelay() {\n    this.progressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay)\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show()\n  }\n\n  hideProgressBar() {\n    this.progressBar.hide()\n    if (this.progressBarTimeout != null) {\n      window.clearTimeout(this.progressBarTimeout)\n      delete this.progressBarTimeout\n    }\n  }\n\n  reload() {\n    window.location.reload()\n  }\n\n  get navigator() {\n    return this.session.navigator\n  }\n}\n","export class CacheObserver {\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-cache\", this.removeStaleElements, false)\n    }\n  }\n\n  removeStaleElements() {\n    const staleElements = [ ...document.querySelectorAll('[data-turbo-cache=\"false\"]') ]\n\n    for (const element of staleElements) {\n       element.remove()\n     }\n  }\n}\n","export interface FormSubmitObserverDelegate {\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement): void\n}\n\nexport class FormSubmitObserver {\n  readonly delegate: FormSubmitObserverDelegate\n  started = false\n\n  constructor(delegate: FormSubmitObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"submit\", this.submitCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"submit\", this.submitCaptured, true)\n      this.started = false\n    }\n  }\n\n  submitCaptured = () => {\n    removeEventListener(\"submit\", this.submitBubbled, false)\n    addEventListener(\"submit\", this.submitBubbled, false)\n  }\n\n  submitBubbled = <EventListener>((event: SubmitEvent) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined\n      const submitter = event.submitter || undefined\n\n      if (form) {\n        const method = submitter?.getAttribute(\"formmethod\") || form.method\n\n        if (method != \"dialog\" && this.delegate.willSubmitForm(form, submitter)) {\n          event.preventDefault()\n          this.delegate.formSubmitted(form, submitter)\n        }\n      }\n    }\n  })\n}\n","import { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FrameElement } from \"../../elements/frame_element\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\n\nexport class FrameRedirector implements LinkInterceptorDelegate, FormInterceptorDelegate {\n  readonly element: Element\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n\n  constructor(element: Element) {\n    this.element = element\n    this.linkInterceptor = new LinkInterceptor(this, element)\n    this.formInterceptor = new FormInterceptor(this, element)\n  }\n\n  start() {\n    this.linkInterceptor.start()\n    this.formInterceptor.start()\n  }\n\n  stop() {\n    this.linkInterceptor.stop()\n    this.formInterceptor.stop()\n  }\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    return this.shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.src = url\n    }\n  }\n\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: HTMLElement) {\n    return this.shouldRedirect(element, submitter)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element)\n    if (frame) {\n      frame.delegate.formSubmissionIntercepted(element, submitter)\n    }\n  }\n\n  private shouldRedirect(element: Element, submitter?: HTMLElement) {\n    const frame = this.findFrameElement(element)\n    return frame ? frame != element.closest(\"turbo-frame\") : false\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\")\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`)\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n","import { Position } from \"../types\"\nimport { nextMicrotask, uuid } from \"../../util\"\n\nexport interface HistoryDelegate {\n  historyPoppedToLocationWithRestorationIdentifier(location: URL, restorationIdentifier: string): void\n}\n\ntype HistoryMethod = (this: typeof history, state: any, title: string, url?: string | null | undefined) => void\n\nexport type RestorationData = { scrollPosition?: Position }\n\nexport type RestorationDataMap = { [restorationIdentifier: string]: RestorationData }\n\nexport class History {\n  readonly delegate: HistoryDelegate\n  location!: URL\n  restorationIdentifier = uuid()\n  restorationData: RestorationDataMap = {}\n  started = false\n  pageLoaded = false\n  previousScrollRestoration?: ScrollRestoration\n\n  constructor(delegate: HistoryDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"popstate\", this.onPopState, false)\n      addEventListener(\"load\", this.onPageLoad, false)\n      this.started = true\n      this.replace(new URL(window.location.href))\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"popstate\", this.onPopState, false)\n      removeEventListener(\"load\", this.onPageLoad, false)\n      this.started = false\n    }\n  }\n\n  push(location: URL, restorationIdentifier?: string) {\n    this.update(history.pushState, location, restorationIdentifier)\n  }\n\n  replace(location: URL, restorationIdentifier?: string) {\n    this.update(history.replaceState, location, restorationIdentifier)\n  }\n\n  update(method: HistoryMethod, location: URL, restorationIdentifier = uuid()) {\n    const state = { turbo: { restorationIdentifier } }\n    method.call(history, state, \"\", location.href)\n    this.location = location\n    this.restorationIdentifier = restorationIdentifier\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier: string): RestorationData {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData: Partial<RestorationData>) {\n    const { restorationIdentifier } = this\n    const restorationData = this.restorationData[restorationIdentifier]\n    this.restorationData[restorationIdentifier] = { ...restorationData, ...additionalData }\n  }\n\n  // Scroll restoration\n\n  assumeControlOfScrollRestoration() {\n    if (!this.previousScrollRestoration) {\n      this.previousScrollRestoration = history.scrollRestoration ?? \"auto\"\n      history.scrollRestoration = \"manual\"\n    }\n  }\n\n  relinquishControlOfScrollRestoration() {\n    if (this.previousScrollRestoration) {\n      history.scrollRestoration = this.previousScrollRestoration\n      delete this.previousScrollRestoration\n    }\n  }\n\n  // Event handlers\n\n  onPopState = (event: PopStateEvent) => {\n    if (this.shouldHandlePopState()) {\n      const { turbo } = event.state || {}\n      if (turbo) {\n        this.location = new URL(window.location.href)\n        const { restorationIdentifier } = turbo\n        this.restorationIdentifier = restorationIdentifier\n        this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location, restorationIdentifier)\n      }\n    }\n  }\n\n  onPageLoad = async (event: Event) => {\n    await nextMicrotask()\n    this.pageLoaded = true\n  }\n\n  // Private\n\n  shouldHandlePopState() {\n    // Safari dispatches a popstate event after window's load event, ignore it\n    return this.pageIsLoaded()\n  }\n\n  pageIsLoaded() {\n    return this.pageLoaded || document.readyState == \"complete\"\n  }\n}\n","import { expandURL } from \"../core/url\"\n\nexport interface LinkClickObserverDelegate {\n  willFollowLinkToLocation(link: Element, location: URL): boolean\n  followedLinkToLocation(link: Element, location: URL): void\n}\n\nexport class LinkClickObserver {\n  readonly delegate: LinkClickObserverDelegate\n  started = false\n\n  constructor(delegate: LinkClickObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"click\", this.clickCaptured, true)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"click\", this.clickCaptured, true)\n      this.started = false\n    }\n  }\n\n  clickCaptured = () => {\n    removeEventListener(\"click\", this.clickBubbled, false)\n    addEventListener(\"click\", this.clickBubbled, false)\n  }\n\n  clickBubbled = (event: MouseEvent) => {\n    if (this.clickEventIsSignificant(event)) {\n      const target = (event.composedPath && event.composedPath()[0]) || event.target\n      const link = this.findLinkFromClickTarget(target)\n      if (link) {\n        const location = this.getLocationForLink(link)\n        if (this.delegate.willFollowLinkToLocation(link, location)) {\n          event.preventDefault()\n          this.delegate.followedLinkToLocation(link, location)\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event: MouseEvent) {\n    return !(\n      (event.target && (event.target as any).isContentEditable)\n      || event.defaultPrevented\n      || event.which > 1\n      || event.altKey\n      || event.ctrlKey\n      || event.metaKey\n      || event.shiftKey\n    )\n  }\n\n  findLinkFromClickTarget(target: EventTarget | null) {\n    if (target instanceof Element) {\n      return target.closest(\"a[href]:not([target^=_]):not([download])\")\n    }\n  }\n\n  getLocationForLink(link: Element): URL {\n    return expandURL(link.getAttribute(\"href\") || \"\")\n  }\n}\n","export type Action = \"advance\" | \"replace\" | \"restore\"\n\nexport function isAction(action: any): action is Action {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nexport type Position = { x: number, y: number }\n\nexport type StreamSource = {\n  addEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | AddEventListenerOptions): void\n  removeEventListener(type: \"message\", listener: (event: MessageEvent) => void, options?: boolean | EventListenerOptions): void\n}\n","import { Action, isAction } from \"../types\"\nimport { FetchMethod } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { FormSubmission } from \"./form_submission\"\nimport { expandURL, getAnchor, getRequestURL, Locatable } from \"../url\"\nimport { Visit, VisitDelegate, VisitOptions } from \"./visit\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport type NavigatorDelegate = VisitDelegate & {\n  allowsVisitingLocationWithAction(location: URL, action?: Action): boolean\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>): void\n  notifyApplicationAfterVisitingSamePageLocation(oldURL: URL, newURL: URL): void\n}\n\nexport class Navigator {\n  readonly delegate: NavigatorDelegate\n  formSubmission?: FormSubmission\n  currentVisit?: Visit\n\n  constructor(delegate: NavigatorDelegate) {\n    this.delegate = delegate\n  }\n\n  proposeVisit(location: URL, options: Partial<VisitOptions> = {}) {\n    if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n      this.delegate.visitProposedToLocation(location, options)\n    }\n  }\n\n  startVisit(locatable: Locatable, restorationIdentifier: string, options: Partial<VisitOptions> = {}) {\n    this.stop()\n    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {\n      referrer: this.location,\n      ...options\n    })\n    this.currentVisit.start()\n  }\n\n  submitForm(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.stop()\n    this.formSubmission = new FormSubmission(this, form, submitter, true)\n\n    if (this.formSubmission.isIdempotent) {\n      this.proposeVisit(this.formSubmission.fetchRequest.url, { action: this.getActionForFormSubmission(this.formSubmission) })\n    } else {\n      this.formSubmission.start()\n    }\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n      delete this.formSubmission\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel()\n      delete this.currentVisit\n    }\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n    // Not all adapters implement formSubmissionStarted\n    if (typeof this.adapter.formSubmissionStarted === 'function') {\n      this.adapter.formSubmissionStarted(formSubmission)\n    }\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML\n      if (responseHTML) {\n        if (formSubmission.method != FetchMethod.get) {\n          this.view.clearSnapshotCache()\n        }\n\n        const { statusCode } = fetchResponse\n        const visitOptions = { response: { statusCode, responseHTML } }\n        this.proposeVisit(fetchResponse.location, visitOptions)\n      }\n    }\n  }\n\n  async formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    const responseHTML = await fetchResponse.responseHTML\n\n    if (responseHTML) {\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML)\n      if (fetchResponse.serverError) {\n        await this.view.renderError(snapshot)\n      } else {\n        await this.view.renderPage(snapshot)\n      }\n      this.view.scrollToTop()\n      this.view.clearSnapshotCache()\n    }\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n    // Not all adapters implement formSubmissionFinished\n    if (typeof this.adapter.formSubmissionFinished === 'function') {\n      this.adapter.formSubmissionFinished(formSubmission)\n    }\n  }\n\n  // Visit delegate\n\n  visitStarted(visit: Visit) {\n    this.delegate.visitStarted(visit)\n  }\n\n  visitCompleted(visit: Visit) {\n    this.delegate.visitCompleted(visit)\n  }\n\n  locationWithActionIsSamePage(location: URL, action?: Action): boolean {\n    const anchor = getAnchor(location)\n    const currentAnchor = getAnchor(this.view.lastRenderedLocation)\n    const isRestorationToTop = action === 'restore' && typeof anchor === 'undefined'\n\n    return action !== \"replace\" &&\n      getRequestURL(location) === getRequestURL(this.view.lastRenderedLocation) &&\n      (isRestorationToTop || (anchor != null && anchor !== currentAnchor))\n  }\n\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL) {\n    this.delegate.visitScrolledToSamePageLocation(oldURL, newURL)\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  getActionForFormSubmission(formSubmission: FormSubmission): Action {\n    const { formElement, submitter } = formSubmission\n    const action = submitter?.getAttribute(\"data-turbo-action\") || formElement.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n}\n","export interface PageObserverDelegate {\n  pageBecameInteractive(): void\n  pageLoaded(): void\n  pageWillUnload(): void\n}\n\nexport enum PageStage {\n  initial,\n  loading,\n  interactive,\n  complete\n}\n\nexport class PageObserver {\n  readonly delegate: PageObserverDelegate\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate: PageObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false)\n      addEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false)\n      removeEventListener(\"pagehide\", this.pageWillUnload, false)\n      this.started = false\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive()\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete()\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive\n      this.delegate.pageBecameInteractive()\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive()\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete\n      this.delegate.pageLoaded()\n    }\n  }\n\n  pageWillUnload = () => {\n    this.delegate.pageWillUnload()\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n","import { Position } from \"../core/types\"\n\nexport interface ScrollObserverDelegate {\n  scrollPositionChanged(position: Position): void\n}\n\nexport class ScrollObserver {\n  readonly delegate: ScrollObserverDelegate\n  started = false\n\n  constructor(delegate: ScrollObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false)\n      this.onScroll()\n      this.started = true\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false)\n      this.started = false\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset })\n  }\n\n  // Private\n\n  updatePosition(position: Position) {\n    this.delegate.scrollPositionChanged(position)\n  }\n}\n","import { FetchResponse } from \"../http/fetch_response\"\nimport { StreamMessage } from \"../core/streams/stream_message\"\nimport { StreamSource } from \"../core/types\"\n\nexport interface StreamObserverDelegate {\n  receivedMessageFromStream(message: StreamMessage): void\n}\n\nexport class StreamObserver {\n  readonly delegate: StreamObserverDelegate\n  readonly sources: Set<StreamSource> = new Set\n  private started = false\n\n  constructor(delegate: StreamObserverDelegate) {\n    this.delegate = delegate\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false)\n    }\n  }\n\n  connectStreamSource(source: StreamSource) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source)\n      source.addEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source)\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false)\n    }\n  }\n\n  streamSourceIsConnected(source: StreamSource) {\n    return this.sources.has(source)\n  }\n\n  inspectFetchResponse = <EventListener>((event: CustomEvent) => {\n    const response = fetchResponseFromEvent(event)\n    if (response && fetchResponseIsStream(response)) {\n      event.preventDefault()\n      this.receiveMessageResponse(response)\n    }\n  })\n\n  receiveMessageEvent = (event: MessageEvent) => {\n    if (this.started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data)\n    }\n  }\n\n  async receiveMessageResponse(response: FetchResponse) {\n    const html = await response.responseHTML\n    if (html) {\n      this.receiveMessageHTML(html)\n    }\n  }\n\n  receiveMessageHTML(html: string) {\n    this.delegate.receivedMessageFromStream(new StreamMessage(html))\n  }\n}\n\nfunction fetchResponseFromEvent(event: CustomEvent) {\n  const fetchResponse = event.detail?.fetchResponse\n  if (fetchResponse instanceof FetchResponse) {\n    return fetchResponse\n  }\n}\n\nfunction fetchResponseIsStream(response: FetchResponse) {\n  const contentType = response.contentType ?? \"\"\n  return contentType.startsWith(StreamMessage.contentType)\n}\n","import { PageSnapshot } from \"./page_snapshot\"\nimport { Renderer } from \"../renderer\"\n\nexport class ErrorRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  async render() {\n    this.replaceHeadAndBody()\n    this.activateScriptElements()\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head, body } = document\n    documentElement.replaceChild(this.newHead, head)\n    documentElement.replaceChild(this.newElement, body)\n  }\n\n  activateScriptElements() {\n    for (const replaceableElement of this.scriptElements) {\n      const parentNode = replaceableElement.parentNode\n      if (parentNode) {\n        const element = this.createScriptElement(replaceableElement)\n        parentNode.replaceChild(element, replaceableElement)\n      }\n    }\n  }\n\n  get newHead() {\n    return this.newSnapshot.headSnapshot.element\n  }\n\n  get scriptElements() {\n    return [ ...document.documentElement.querySelectorAll(\"script\") ]\n  }\n}\n","import { Renderer } from \"../renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport class PageRenderer extends Renderer<HTMLBodyElement, PageSnapshot> {\n  get shouldRender() {\n    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical\n  }\n\n  prepareToRender() {\n    this.mergeHead()\n  }\n\n  async render() {\n    this.replaceBody()\n  }\n\n  finishRendering() {\n    super.finishRendering()\n    if (!this.isPreview) {\n      this.focusFirstAutofocusableElement()\n    }\n  }\n\n  get currentHeadSnapshot() {\n    return this.currentSnapshot.headSnapshot\n  }\n\n  get newHeadSnapshot() {\n    return this.newSnapshot.headSnapshot\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  mergeHead() {\n    this.copyNewHeadStylesheetElements()\n    this.copyNewHeadScriptElements()\n    this.removeCurrentHeadProvisionalElements()\n    this.copyNewHeadProvisionalElements()\n  }\n\n  replaceBody() {\n    this.preservingPermanentElements(() => {\n      this.activateNewBody()\n      this.assignNewBody()\n    })\n  }\n\n  get trackedElementsAreIdentical() {\n    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature\n  }\n\n  copyNewHeadStylesheetElements() {\n    for (const element of this.newHeadStylesheetElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.newHeadScriptElements) {\n      document.head.appendChild(this.createScriptElement(element))\n    }\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.currentHeadProvisionalElements) {\n      document.head.removeChild(element)\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.newHeadProvisionalElements) {\n      document.head.appendChild(element)\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newElement)\n    this.activateNewBodyScriptElements()\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.newBodyScriptElements) {\n      const activatedScriptElement = this.createScriptElement(inertScriptElement)\n      inertScriptElement.replaceWith(activatedScriptElement)\n    }\n  }\n\n  assignNewBody() {\n    if (document.body && this.newElement instanceof HTMLBodyElement) {\n      document.body.replaceWith(this.newElement)\n    } else {\n      document.documentElement.appendChild(this.newElement)\n    }\n  }\n\n  get newHeadStylesheetElements() {\n    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get newHeadScriptElements() {\n    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get currentHeadProvisionalElements() {\n    return this.currentHeadSnapshot.provisionalElements\n  }\n\n  get newHeadProvisionalElements() {\n    return this.newHeadSnapshot.provisionalElements\n  }\n\n  get newBodyScriptElements() {\n    return this.newElement.querySelectorAll(\"script\")\n  }\n}\n","import { toCacheKey } from \"../url\"\nimport { PageSnapshot } from \"./page_snapshot\"\n\nexport class SnapshotCache {\n  readonly keys: string[] = []\n  readonly size: number\n  snapshots: { [url: string]: PageSnapshot } = {}\n\n  constructor(size: number) {\n    this.size = size\n  }\n\n  has(location: URL) {\n    return toCacheKey(location) in this.snapshots\n  }\n\n  get(location: URL): PageSnapshot | undefined {\n    if (this.has(location)) {\n      const snapshot = this.read(location)\n      this.touch(location)\n      return snapshot\n    }\n  }\n\n  put(location: URL, snapshot: PageSnapshot) {\n    this.write(location, snapshot)\n    this.touch(location)\n    return snapshot\n  }\n\n  clear() {\n    this.snapshots = {}\n  }\n\n  // Private\n\n  read(location: URL) {\n    return this.snapshots[toCacheKey(location)]\n  }\n\n  write(location: URL, snapshot: PageSnapshot) {\n    this.snapshots[toCacheKey(location)] = snapshot\n  }\n\n  touch(location: URL) {\n    const key = toCacheKey(location)\n    const index = this.keys.indexOf(key)\n    if (index > -1) this.keys.splice(index, 1)\n    this.keys.unshift(key)\n    this.trim()\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      delete this.snapshots[key]\n    }\n  }\n}\n","import { nextEventLoopTick } from \"../../util\"\nimport { View, ViewDelegate } from \"../view\"\nimport { ErrorRenderer } from \"./error_renderer\"\nimport { PageRenderer } from \"./page_renderer\"\nimport { PageSnapshot } from \"./page_snapshot\"\nimport { SnapshotCache } from \"./snapshot_cache\"\n\nexport interface PageViewDelegate extends ViewDelegate<PageSnapshot> {\n  viewWillCacheSnapshot(): void\n}\n\ntype PageViewRenderer = PageRenderer | ErrorRenderer\n\nexport class PageView extends View<Element, PageSnapshot, PageViewRenderer, PageViewDelegate> {\n  readonly snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation = new URL(location.href)\n\n  renderPage(snapshot: PageSnapshot, isPreview = false) {\n    const renderer = new PageRenderer(this.snapshot, snapshot, isPreview)\n    return this.render(renderer)\n  }\n\n  renderError(snapshot: PageSnapshot) {\n    const renderer = new ErrorRenderer(this.snapshot, snapshot, false)\n    return this.render(renderer)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear()\n  }\n\n  async cacheSnapshot() {\n    if (this.shouldCacheSnapshot) {\n      this.delegate.viewWillCacheSnapshot()\n      const { snapshot, lastRenderedLocation: location } = this\n      await nextEventLoopTick()\n      this.snapshotCache.put(location, snapshot.clone())\n    }\n  }\n\n  getCachedSnapshotForLocation(location: URL) {\n    return this.snapshotCache.get(location)\n  }\n\n  get snapshot() {\n    return PageSnapshot.fromElement(this.element)\n  }\n\n  get shouldCacheSnapshot() {\n    return this.snapshot.isCacheable\n  }\n}\n","import { Adapter } from \"./native/adapter\"\nimport { BrowserAdapter } from \"./native/browser_adapter\"\nimport { CacheObserver } from \"../observers/cache_observer\"\nimport { FormSubmitObserver, FormSubmitObserverDelegate } from \"../observers/form_submit_observer\"\nimport { FrameRedirector } from \"./frames/frame_redirector\"\nimport { History, HistoryDelegate } from \"./drive/history\"\nimport { LinkClickObserver, LinkClickObserverDelegate } from \"../observers/link_click_observer\"\nimport { expandURL, isPrefixedBy, isHTML, Locatable } from \"./url\"\nimport { Navigator, NavigatorDelegate } from \"./drive/navigator\"\nimport { PageObserver, PageObserverDelegate } from \"../observers/page_observer\"\nimport { ScrollObserver } from \"../observers/scroll_observer\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamObserver } from \"../observers/stream_observer\"\nimport { Action, Position, StreamSource, isAction } from \"./types\"\nimport { dispatch } from \"../util\"\nimport { PageView, PageViewDelegate } from \"./drive/page_view\"\nimport { Visit, VisitOptions } from \"./drive/visit\"\nimport { PageSnapshot } from \"./drive/page_snapshot\"\nimport { FrameElement } from \"../elements/frame_element\"\nimport { FetchResponse } from \"../http/fetch_response\"\n\nexport type TimingData = {}\n\nexport class Session implements FormSubmitObserverDelegate, HistoryDelegate, LinkClickObserverDelegate, NavigatorDelegate, PageObserverDelegate, PageViewDelegate {\n  readonly navigator = new Navigator(this)\n  readonly history = new History(this)\n  readonly view = new PageView(this, document.documentElement)\n  adapter: Adapter = new BrowserAdapter(this)\n\n  readonly pageObserver = new PageObserver(this)\n  readonly cacheObserver = new CacheObserver()\n  readonly linkClickObserver = new LinkClickObserver(this)\n  readonly formSubmitObserver = new FormSubmitObserver(this)\n  readonly scrollObserver = new ScrollObserver(this)\n  readonly streamObserver = new StreamObserver(this)\n\n  readonly frameRedirector = new FrameRedirector(document.documentElement)\n\n  drive = true\n  enabled = true\n  progressBarDelay = 500\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start()\n      this.cacheObserver.start()\n      this.linkClickObserver.start()\n      this.formSubmitObserver.start()\n      this.scrollObserver.start()\n      this.streamObserver.start()\n      this.frameRedirector.start()\n      this.history.start()\n      this.started = true\n      this.enabled = true\n    }\n  }\n\n  disable() {\n    this.enabled = false\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop()\n      this.cacheObserver.stop()\n      this.linkClickObserver.stop()\n      this.formSubmitObserver.stop()\n      this.scrollObserver.stop()\n      this.streamObserver.stop()\n      this.frameRedirector.stop()\n      this.history.stop()\n      this.started = false\n    }\n  }\n\n  registerAdapter(adapter: Adapter) {\n    this.adapter = adapter\n  }\n\n  visit(location: Locatable, options: Partial<VisitOptions> = {}) {\n    this.navigator.proposeVisit(expandURL(location), options)\n  }\n\n  connectStreamSource(source: StreamSource) {\n    this.streamObserver.connectStreamSource(source)\n  }\n\n  disconnectStreamSource(source: StreamSource) {\n    this.streamObserver.disconnectStreamSource(source)\n  }\n\n  renderStreamMessage(message: StreamMessage | string) {\n    document.documentElement.appendChild(StreamMessage.wrap(message).fragment)\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache()\n  }\n\n  setProgressBarDelay(delay: number) {\n    this.progressBarDelay = delay\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifier(location: URL, restorationIdentifier: string) {\n    if (this.enabled) {\n      this.navigator.startVisit(location, restorationIdentifier, { action: \"restore\", historyChanged: true })\n    } else {\n      this.adapter.pageInvalidated()\n    }\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position: Position) {\n    this.history.updateRestorationData({ scrollPosition: position })\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link: Element, location: URL) {\n    return this.elementDriveEnabled(link)\n      && this.locationIsVisitable(location)\n      && this.applicationAllowsFollowingLinkToLocation(link, location)\n  }\n\n  followedLinkToLocation(link: Element, location: URL) {\n    const action = this.getActionForLink(link)\n    this.convertLinkWithMethodClickToFormSubmission(link) || this.visit(location.href, { action })\n  }\n\n  convertLinkWithMethodClickToFormSubmission(link: Element) {\n    const linkMethod = link.getAttribute(\"data-turbo-method\")\n\n    if (linkMethod) {\n      const form = document.createElement(\"form\")\n      form.method = linkMethod\n      form.action = link.getAttribute(\"href\") || \"undefined\"\n\n      document.body.appendChild(form)\n      return dispatch(\"submit\", { cancelable: true, target: form })\n    } else {\n      return false\n    }\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocationWithAction(location: URL, action?: Action) {\n    return this.locationWithActionIsSamePage(location, action) || this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location: URL, options: Partial<VisitOptions>) {\n    extendURLWithDeprecatedProperties(location)\n    this.adapter.visitProposedToLocation(location, options)\n  }\n\n  visitStarted(visit: Visit) {\n    extendURLWithDeprecatedProperties(visit.location)\n    if (!visit.silent) {\n      this.notifyApplicationAfterVisitingLocation(visit.location, visit.action)\n    }\n  }\n\n  visitCompleted(visit: Visit) {\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics())\n  }\n\n  locationWithActionIsSamePage(location: URL, action?: Action): boolean {\n    return this.navigator.locationWithActionIsSamePage(location, action)\n  }\n\n  visitScrolledToSamePageLocation(oldURL: URL, newURL: URL) {\n    this.notifyApplicationAfterVisitingSamePageLocation(oldURL, newURL)\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form: HTMLFormElement, submitter?: HTMLElement): boolean {\n    return this.elementDriveEnabled(form) && this.elementDriveEnabled(submitter)\n  }\n\n  formSubmitted(form: HTMLFormElement, submitter?: HTMLElement) {\n    this.navigator.submitForm(form, submitter)\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location\n    this.notifyApplicationAfterPageLoad()\n  }\n\n  pageLoaded() {\n    this.history.assumeControlOfScrollRestoration()\n  }\n\n  pageWillUnload() {\n    this.history.relinquishControlOfScrollRestoration()\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message: StreamMessage) {\n    this.renderStreamMessage(message)\n  }\n\n  // Page view delegate\n\n  viewWillCacheSnapshot() {\n    if (!this.navigator.currentVisit?.silent) {\n      this.notifyApplicationBeforeCachingSnapshot()\n    }\n  }\n\n  allowsImmediateRender({ element }: PageSnapshot, resume: (value: any) => void) {\n    const event = this.notifyApplicationBeforeRender(element, resume)\n    return !event.defaultPrevented\n  }\n\n  viewRenderedSnapshot(snapshot: PageSnapshot, isPreview: boolean) {\n    this.view.lastRenderedLocation = this.history.location\n    this.notifyApplicationAfterRender()\n  }\n\n  viewInvalidated() {\n    this.adapter.pageInvalidated()\n  }\n\n  // Frame element\n\n  frameLoaded(frame: FrameElement) {\n    this.notifyApplicationAfterFrameLoad(frame)\n  }\n\n  frameRendered(fetchResponse: FetchResponse, frame: FrameElement) {\n    this.notifyApplicationAfterFrameRender(fetchResponse, frame);\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link: Element, location: URL) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location)\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location: URL) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location)\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link: Element, location: URL) {\n    return dispatch(\"turbo:click\", { target: link, detail: { url: location.href }, cancelable: true })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location: URL) {\n    return dispatch(\"turbo:before-visit\", { detail: { url: location.href }, cancelable: true })\n  }\n\n  notifyApplicationAfterVisitingLocation(location: URL, action: Action) {\n    return dispatch(\"turbo:visit\", { detail: { url: location.href, action } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody: HTMLBodyElement, resume: (value: any) => void) {\n    return dispatch(\"turbo:before-render\", { detail: { newBody, resume }, cancelable: true })\n  }\n\n  notifyApplicationAfterRender() {\n    return dispatch(\"turbo:render\")\n  }\n\n  notifyApplicationAfterPageLoad(timing: TimingData = {}) {\n    return dispatch(\"turbo:load\", { detail: { url: this.location.href, timing }})\n  }\n\n  notifyApplicationAfterVisitingSamePageLocation(oldURL: URL, newURL: URL) {\n    dispatchEvent(new HashChangeEvent(\"hashchange\", { oldURL: oldURL.toString(), newURL: newURL.toString() }))\n  }\n\n  notifyApplicationAfterFrameLoad(frame: FrameElement) {\n    return dispatch(\"turbo:frame-load\", { target: frame })\n  }\n\n  notifyApplicationAfterFrameRender(fetchResponse: FetchResponse, frame: FrameElement) {\n    return dispatch(\"turbo:frame-render\", { detail: { fetchResponse }, target: frame, cancelable: true })\n  }\n\n  // Helpers\n\n  elementDriveEnabled(element?: Element) {\n    const container = element?.closest(\"[data-turbo]\")\n\n    // Check if Drive is enabled on the session.\n    if (this.drive) {\n      // Drive should be enabled by default, unless `data-turbo=\"false\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") != \"false\"\n      } else {\n        return true\n      }\n    } else {\n      // Drive should be disabled by default, unless `data-turbo=\"true\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") == \"true\"\n      } else {\n        return false\n      }\n    }\n  }\n\n  // Private\n\n  getActionForLink(link: Element): Action {\n    const action = link.getAttribute(\"data-turbo-action\")\n    return isAction(action) ? action : \"advance\"\n  }\n\n  locationIsVisitable(location: URL) {\n    return isPrefixedBy(location, this.snapshot.rootLocation) && isHTML(location)\n  }\n\n  get snapshot() {\n    return this.view.snapshot\n  }\n}\n\n// Older versions of the Turbo Native adapters referenced the\n// `Location#absoluteURL` property in their implementations of\n// the `Adapter#visitProposedToLocation()` and `#visitStarted()`\n// methods. The Location class has since been removed in favor\n// of the DOM URL API, and accordingly all Adapter methods now\n// receive URL objects.\n//\n// We alias #absoluteURL to #toString() here to avoid crashing\n// older adapters which do not expect URL objects. We should\n// consider removing this support at some point in the future.\n\nfunction extendURLWithDeprecatedProperties(url: URL) {\n  Object.defineProperties(url, deprecatedLocationPropertyDescriptors)\n}\n\nconst deprecatedLocationPropertyDescriptors = {\n  absoluteURL: {\n    get() {\n      return this.toString()\n    }\n  }\n}\n","import { Adapter } from \"./native/adapter\"\nimport { Session } from \"./session\"\nimport { Locatable } from \"./url\"\nimport { StreamMessage } from \"./streams/stream_message\"\nimport { StreamSource } from \"./types\"\nimport { VisitOptions } from \"./drive/visit\"\nimport { PageRenderer } from \"./drive/page_renderer\"\nimport { PageSnapshot } from \"./drive/page_snapshot\"\n\nconst session = new Session\nconst { navigator } = session\nexport { navigator, session, PageRenderer, PageSnapshot }\n\nexport function start() {\n  session.start()\n}\n\nexport function registerAdapter(adapter: Adapter) {\n  session.registerAdapter(adapter)\n}\n\nexport function visit(location: Locatable, options?: Partial<VisitOptions>) {\n  session.visit(location, options)\n}\n\nexport function connectStreamSource(source: StreamSource) {\n  session.connectStreamSource(source)\n}\n\nexport function disconnectStreamSource(source: StreamSource) {\n  session.disconnectStreamSource(source)\n}\n\nexport function renderStreamMessage(message: StreamMessage | string) {\n  session.renderStreamMessage(message)\n}\n\nexport function clearCache() {\n  session.clearCache()\n}\n\nexport function setProgressBarDelay(delay: number) {\n  session.setProgressBarDelay(delay)\n}\n","import { FrameElement, FrameElementDelegate, FrameLoadingStyle } from \"../../elements/frame_element\"\nimport { FetchMethod, FetchRequest, FetchRequestDelegate, FetchRequestHeaders } from \"../../http/fetch_request\"\nimport { FetchResponse } from \"../../http/fetch_response\"\nimport { AppearanceObserver, AppearanceObserverDelegate } from \"../../observers/appearance_observer\"\nimport { parseHTMLDocument } from \"../../util\"\nimport { FormSubmission, FormSubmissionDelegate } from \"../drive/form_submission\"\nimport { Snapshot } from \"../snapshot\"\nimport { ViewDelegate } from \"../view\"\nimport { expandURL, urlsAreEqual, Locatable } from \"../url\"\nimport { FormInterceptor, FormInterceptorDelegate } from \"./form_interceptor\"\nimport { FrameView } from \"./frame_view\"\nimport { LinkInterceptor, LinkInterceptorDelegate } from \"./link_interceptor\"\nimport { FrameRenderer } from \"./frame_renderer\"\nimport { session } from \"../index\"\n\nexport class FrameController implements AppearanceObserverDelegate, FetchRequestDelegate, FormInterceptorDelegate, FormSubmissionDelegate, FrameElementDelegate, LinkInterceptorDelegate, ViewDelegate<Snapshot<FrameElement>> {\n  readonly element: FrameElement\n  readonly view: FrameView\n  readonly appearanceObserver: AppearanceObserver\n  readonly linkInterceptor: LinkInterceptor\n  readonly formInterceptor: FormInterceptor\n  currentURL?: string | null\n  formSubmission?: FormSubmission\n  private resolveVisitPromise = () => {}\n  private connected = false\n  private hasBeenLoaded = false\n  private settingSourceURL = false\n\n  constructor(element: FrameElement) {\n    this.element = element\n    this.view = new FrameView(this, this.element)\n    this.appearanceObserver = new AppearanceObserver(this, this.element)\n    this.linkInterceptor = new LinkInterceptor(this, this.element)\n    this.formInterceptor = new FormInterceptor(this, this.element)\n  }\n\n  connect() {\n    if (!this.connected) {\n      this.connected = true\n      this.reloadable = false\n      if (this.loadingStyle == FrameLoadingStyle.lazy) {\n        this.appearanceObserver.start()\n      }\n      this.linkInterceptor.start()\n      this.formInterceptor.start()\n      this.sourceURLChanged()\n    }\n  }\n\n  disconnect() {\n    if (this.connected) {\n      this.connected = false\n      this.appearanceObserver.stop()\n      this.linkInterceptor.stop()\n      this.formInterceptor.stop()\n    }\n  }\n\n  disabledChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager) {\n      this.loadSourceURL()\n    }\n  }\n\n  sourceURLChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.eager || this.hasBeenLoaded) {\n      this.loadSourceURL()\n    }\n  }\n\n  loadingStyleChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.lazy) {\n      this.appearanceObserver.start()\n    } else {\n      this.appearanceObserver.stop()\n      this.loadSourceURL()\n    }\n  }\n\n  async loadSourceURL() {\n    if (!this.settingSourceURL && this.enabled && this.isActive && (this.reloadable || this.sourceURL != this.currentURL)) {\n      const previousURL = this.currentURL\n      this.currentURL = this.sourceURL\n      if (this.sourceURL) {\n        try {\n          this.element.loaded = this.visit(this.sourceURL)\n          this.appearanceObserver.stop()\n          await this.element.loaded\n          this.hasBeenLoaded = true\n          session.frameLoaded(this.element)\n        } catch (error) {\n          this.currentURL = previousURL\n          throw error\n        }\n      }\n    }\n  }\n\n  async loadResponse(fetchResponse: FetchResponse) {\n    if (fetchResponse.redirected) {\n      this.sourceURL = fetchResponse.response.url\n    }\n\n    try {\n      const html = await fetchResponse.responseHTML\n      if (html) {\n        const { body } = parseHTMLDocument(html)\n        const snapshot = new Snapshot(await this.extractForeignFrameElement(body))\n        const renderer = new FrameRenderer(this.view.snapshot, snapshot, false)\n        if (this.view.renderPromise) await this.view.renderPromise\n        await this.view.render(renderer)\n        session.frameRendered(fetchResponse, this.element);\n      }\n    } catch (error) {\n      console.error(error)\n      this.view.invalidate()\n    }\n  }\n\n  // Appearance observer delegate\n\n  elementAppearedInViewport(element: Element) {\n    this.loadSourceURL()\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element: Element, url: string) {\n    if (element.hasAttribute(\"data-turbo-method\")) {\n      return false\n    } else {\n      return this.shouldInterceptNavigation(element)\n    }\n  }\n\n  linkClickIntercepted(element: Element, url: string) {\n    this.reloadable = true\n    this.navigateFrame(element, url)\n  }\n\n  // Form interceptor delegate\n\n  shouldInterceptFormSubmission(element: HTMLFormElement, submitter?: Element) {\n    return this.shouldInterceptNavigation(element, submitter)\n  }\n\n  formSubmissionIntercepted(element: HTMLFormElement, submitter?: HTMLElement) {\n    if (this.formSubmission) {\n      this.formSubmission.stop()\n    }\n\n    this.reloadable = false\n    this.formSubmission = new FormSubmission(this, element, submitter)\n    if (this.formSubmission.fetchRequest.isIdempotent) {\n      this.navigateFrame(element, this.formSubmission.fetchRequest.url.href)\n    } else {\n      const { fetchRequest } = this.formSubmission\n      this.prepareHeadersForRequest(fetchRequest.headers, fetchRequest)\n      this.formSubmission.start()\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareHeadersForRequest(headers: FetchRequestHeaders, request: FetchRequest) {\n    headers[\"Turbo-Frame\"] = this.id\n  }\n\n  requestStarted(request: FetchRequest) {\n    this.element.setAttribute(\"busy\", \"\")\n  }\n\n  requestPreventedHandlingResponse(request: FetchRequest, response: FetchResponse) {\n    this.resolveVisitPromise()\n  }\n\n  async requestSucceededWithResponse(request: FetchRequest, response: FetchResponse) {\n    await this.loadResponse(response)\n    this.resolveVisitPromise()\n  }\n\n  requestFailedWithResponse(request: FetchRequest, response: FetchResponse) {\n    console.error(response)\n    this.resolveVisitPromise()\n  }\n\n  requestErrored(request: FetchRequest, error: Error) {\n    console.error(error)\n    this.resolveVisitPromise()\n  }\n\n  requestFinished(request: FetchRequest) {\n    this.element.removeAttribute(\"busy\")\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission: FormSubmission) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.setAttribute(\"busy\", \"\")\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission: FormSubmission, response: FetchResponse) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.delegate.loadResponse(response)\n  }\n\n  formSubmissionFailedWithResponse(formSubmission: FormSubmission, fetchResponse: FetchResponse) {\n    this.element.delegate.loadResponse(fetchResponse)\n  }\n\n  formSubmissionErrored(formSubmission: FormSubmission, error: Error) {\n    console.error(error)\n  }\n\n  formSubmissionFinished(formSubmission: FormSubmission) {\n    const frame = this.findFrameElement(formSubmission.formElement)\n    frame.removeAttribute(\"busy\")\n  }\n\n  // View delegate\n\n  allowsImmediateRender(snapshot: Snapshot, resume: (value: any) => void) {\n    return true\n  }\n\n  viewRenderedSnapshot(snapshot: Snapshot, isPreview: boolean) {\n  }\n\n  viewInvalidated() {\n  }\n\n  // Private\n\n  private async visit(url: Locatable) {\n    const request = new FetchRequest(this, FetchMethod.get, expandURL(url))\n\n    return new Promise<void>(resolve => {\n      this.resolveVisitPromise = () => {\n        this.resolveVisitPromise = () => {}\n        resolve()\n      }\n      request.perform()\n    })\n  }\n\n  private navigateFrame(element: Element, url: string) {\n    const frame = this.findFrameElement(element)\n    frame.src = url\n  }\n\n  private findFrameElement(element: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\") || this.element.getAttribute(\"target\")\n    return getFrameElementById(id) ?? this.element\n  }\n\n  async extractForeignFrameElement(container: ParentNode): Promise<FrameElement> {\n    let element\n    const id = CSS.escape(this.id)\n\n    try {\n      if (element = activateElement(container.querySelector(`turbo-frame#${id}`), this.currentURL)) {\n        return element\n      }\n\n      if (element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.currentURL)) {\n        await element.loaded\n        return await this.extractForeignFrameElement(element)\n      }\n\n      console.error(`Response has no matching <turbo-frame id=\"${id}\"> element`)\n    } catch (error) {\n      console.error(error)\n    }\n\n    return new FrameElement()\n  }\n\n  private shouldInterceptNavigation(element: Element, submitter?: Element) {\n    const id = element.getAttribute(\"data-turbo-frame\") || this.element.getAttribute(\"target\")\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = getFrameElementById(id)\n      if (frameElement) {\n        return !frameElement.disabled\n      }\n    }\n\n    if (!session.elementDriveEnabled(element)) {\n      return false\n    }\n\n    if (submitter && !session.elementDriveEnabled(submitter)) {\n      return false\n    }\n\n    return true\n  }\n\n  // Computed properties\n\n  get id() {\n    return this.element.id\n  }\n\n  get enabled() {\n    return !this.element.disabled\n  }\n\n  get sourceURL() {\n    if (this.element.src) {\n      return this.element.src\n    }\n  }\n\n  get reloadable() {\n    const frame = this.findFrameElement(this.element)\n    return frame.hasAttribute(\"reloadable\")\n  }\n\n  set reloadable(value: boolean) {\n    const frame = this.findFrameElement(this.element)\n    if (value) {\n      frame.setAttribute(\"reloadable\", \"\")\n    } else {\n      frame.removeAttribute(\"reloadable\")\n    }\n  }\n\n  set sourceURL(sourceURL: string | undefined) {\n    this.settingSourceURL = true\n    this.element.src = sourceURL ?? null\n    this.currentURL = this.element.src\n    this.settingSourceURL = false\n  }\n\n  get loadingStyle() {\n    return this.element.loading\n  }\n\n  get isLoading() {\n    return this.formSubmission !== undefined || this.resolveVisitPromise() !== undefined\n  }\n\n  get isActive() {\n    return this.element.isActive && this.connected\n  }\n}\n\nfunction getFrameElementById(id: string | null) {\n  if (id != null) {\n    const element = document.getElementById(id)\n    if (element instanceof FrameElement) {\n      return element\n    }\n  }\n}\n\nfunction activateElement(element: Element | null, currentURL?: string | null) {\n  if (element) {\n    const src = element.getAttribute(\"src\")\n    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n      throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`)\n    }\n    if (element.ownerDocument !== document) {\n      element = document.importNode(element, true)\n    }\n\n    if (element instanceof FrameElement) {\n      element.connectedCallback()\n      return element\n    }\n  }\n}\n","import { StreamElement } from \"../../elements/stream_element\"\n\nexport const StreamActions: { [action: string]: (this: StreamElement) => void } = {\n  after() {\n    this.targetElements.forEach(e => e.parentElement?.insertBefore(this.templateContent, e.nextSibling))\n  },\n\n  append() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach(e => e.append(this.templateContent))\n  },\n\n  before() {\n    this.targetElements.forEach(e => e.parentElement?.insertBefore(this.templateContent, e))\n  },\n\n  prepend() {\n    this.removeDuplicateTargetChildren()\n    this.targetElements.forEach(e => e.prepend(this.templateContent))\n  },\n\n  remove() {\n    this.targetElements.forEach(e => e.remove())\n  },\n\n  replace() {\n    this.targetElements.forEach(e => e.replaceWith(this.templateContent))\n  },\n\n  update() {\n    this.targetElements.forEach(e => { \n      e.innerHTML = \"\"\n      e.append(this.templateContent)\n    })\n  }\n}\n","import { StreamActions } from \"../core/streams/stream_actions\"\nimport { nextAnimationFrame } from \"../util\"\n\n// <turbo-stream action=replace target=id><template>...\n\nexport class StreamElement extends HTMLElement {\n  async connectedCallback() {\n    try {\n      await this.render()\n    } catch (error) {\n      console.error(error)\n    } finally {\n      this.disconnect()\n    }\n  }\n\n  private renderPromise?: Promise<void>\n\n  async render() {\n    return this.renderPromise ??= (async () => {\n      if (this.dispatchEvent(this.beforeRenderEvent)) {\n        await nextAnimationFrame()\n        this.performAction()\n      }\n    })()\n  }\n\n  disconnect() {\n    try { this.remove() } catch {}\n  }\n \n  removeDuplicateTargetChildren() {\n    this.duplicateChildren.forEach(c => c.remove())\n  }\n  \n  get duplicateChildren() {\n    const existingChildren = this.targetElements.flatMap(e => [...e.children]).filter(c => !!c.id)\n    const newChildrenIds   = [...this.templateContent?.children].filter(c => !!c.id).map(c => c.id)\n  \n    return existingChildren.filter(c => newChildrenIds.includes(c.id))\n  }\n  \n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action]\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.raise(\"unknown action\")\n    }\n    this.raise(\"action attribute is missing\")\n  }\n\n  get targetElements() {\n    if (this.target) { \n      return this.targetElementsById\n    } else if (this.targets) {\n      return this.targetElementsByQuery\n    } else {\n      this.raise(\"target or targets attribute is missing\")\n    }\n  }\n\n  get templateContent() {\n    return this.templateElement.content.cloneNode(true)\n  }\n\n  get templateElement() {\n    if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.raise(\"first child element must be a <template> element\")\n  }\n\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  get targets() {\n    return this.getAttribute(\"targets\")\n  }\n\n  private raise(message: string): never {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  private get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  private get beforeRenderEvent() {\n    return new CustomEvent(\"turbo:before-stream-render\", { bubbles: true, cancelable: true })\n  }\n\n  private get targetElementsById() {\n    const element = this.ownerDocument?.getElementById(this.target!)\n\n    if (element !== null) {\n      return [ element ]\n    } else {\n      return []\n    }\n  }\n\n  private get targetElementsByQuery() {\n    const elements = this.ownerDocument?.querySelectorAll(this.targets!)\n\n    if (elements.length !== 0) {\n      return Array.prototype.slice.call(elements)\n    } else {\n      return []\n    }\n  }\n}\n","import { FrameController } from \"../core/frames/frame_controller\"\nimport { FrameElement } from \"./frame_element\"\nimport { StreamElement } from \"./stream_element\"\n\nFrameElement.delegateConstructor = FrameController\n\nexport * from \"./frame_element\"\nexport * from \"./stream_element\"\n\ncustomElements.define(\"turbo-frame\", FrameElement)\ncustomElements.define(\"turbo-stream\", StreamElement)\n","import { unindent } from \"./util\"\n\n(() => {\n  let element: Element | null = document.currentScript\n  if (!element) return\n  if (element.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  while (element = element.parentElement) {\n    if (element == document.body) {\n      return console.warn(unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `, element.outerHTML)\n    }\n  }\n})()\n","import \"./polyfills\"\nimport \"./elements\"\nimport \"./script_warning\"\n\nexport * from \"./core\"\nimport * as Turbo from \"./core\"\nwindow.Turbo = Turbo\nTurbo.start()\n","import { Binding } from \"./binding\"\n\nexport class EventListener implements EventListenerObject {\n  readonly eventTarget: EventTarget\n  readonly eventName: string\n  readonly eventOptions: AddEventListenerOptions\n  private unorderedBindings: Set<Binding>\n\n  constructor(eventTarget: EventTarget, eventName: string, eventOptions: AddEventListenerOptions) {\n    this.eventTarget = eventTarget\n    this.eventName = eventName\n    this.eventOptions = eventOptions\n    this.unorderedBindings = new Set()\n  }\n\n  connect() {\n    this.eventTarget.addEventListener(this.eventName, this, this.eventOptions)\n  }\n\n  disconnect() {\n    this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions)\n  }\n\n  // Binding observer delegate\n\n  /** @hidden */\n  bindingConnected(binding: Binding) {\n    this.unorderedBindings.add(binding)\n  }\n\n  /** @hidden */\n  bindingDisconnected(binding: Binding) {\n    this.unorderedBindings.delete(binding)\n  }\n\n  handleEvent(event: Event) {\n    const extendedEvent = extendEvent(event)\n    for (const binding of this.bindings) {\n      if (extendedEvent.immediatePropagationStopped) {\n        break\n      } else {\n        binding.handleEvent(extendedEvent)\n      }\n    }\n  }\n\n  get bindings(): Binding[] {\n    return Array.from(this.unorderedBindings).sort((left, right) => {\n      const leftIndex = left.index, rightIndex = right.index\n      return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0\n    })\n  }\n\n}\n\nfunction extendEvent(event: Event) {\n  if (\"immediatePropagationStopped\" in event) {\n    return event\n  } else {\n    const { stopImmediatePropagation } = event\n    return Object.assign(event, {\n      immediatePropagationStopped: false,\n      stopImmediatePropagation() {\n        this.immediatePropagationStopped = true\n        stopImmediatePropagation.call(this)\n      }\n    })\n  }\n}\n","import { Application } from \"./application\"\nimport { Binding } from \"./binding\"\nimport { BindingObserverDelegate } from \"./binding_observer\"\nimport { EventListener } from \"./event_listener\"\n\nexport class Dispatcher implements BindingObserverDelegate {\n  readonly application: Application\n  private eventListenerMaps: Map<EventTarget, Map<string, EventListener>>\n  private started: boolean\n\n  constructor(application: Application) {\n    this.application = application\n    this.eventListenerMaps = new Map\n    this.started = false\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.eventListeners.forEach(eventListener => eventListener.connect())\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      this.eventListeners.forEach(eventListener => eventListener.disconnect())\n    }\n  }\n\n  get eventListeners(): EventListener[] {\n    return Array.from(this.eventListenerMaps.values())\n      .reduce((listeners, map) => listeners.concat(Array.from(map.values())), [] as EventListener[])\n  }\n\n  // Binding observer delegate\n\n  /** @hidden */\n  bindingConnected(binding: Binding) {\n    this.fetchEventListenerForBinding(binding).bindingConnected(binding)\n  }\n\n  /** @hidden */\n  bindingDisconnected(binding: Binding) {\n    this.fetchEventListenerForBinding(binding).bindingDisconnected(binding)\n  }\n\n  // Error handling\n\n  handleError(error: Error, message: string, detail: object = {}) {\n    this.application.handleError(error, `Error ${message}`, detail)\n  }\n\n  private fetchEventListenerForBinding(binding: Binding): EventListener {\n    const { eventTarget, eventName, eventOptions } = binding\n    return this.fetchEventListener(eventTarget, eventName, eventOptions)\n  }\n\n  private fetchEventListener(eventTarget: EventTarget, eventName: string, eventOptions: AddEventListenerOptions): EventListener {\n    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget)\n    const cacheKey = this.cacheKey(eventName, eventOptions)\n    let eventListener = eventListenerMap.get(cacheKey)\n    if (!eventListener) {\n      eventListener = this.createEventListener(eventTarget, eventName, eventOptions)\n      eventListenerMap.set(cacheKey, eventListener)\n    }\n    return eventListener\n  }\n\n  private createEventListener(eventTarget: EventTarget, eventName: string, eventOptions: AddEventListenerOptions): EventListener {\n    const eventListener = new EventListener(eventTarget, eventName, eventOptions)\n    if (this.started) {\n      eventListener.connect()\n    }\n    return eventListener\n  }\n\n  private fetchEventListenerMapForEventTarget(eventTarget: EventTarget): Map<string, EventListener> {\n    let eventListenerMap = this.eventListenerMaps.get(eventTarget)\n    if (!eventListenerMap) {\n      eventListenerMap = new Map\n      this.eventListenerMaps.set(eventTarget, eventListenerMap)\n    }\n    return eventListenerMap\n  }\n\n  private cacheKey(eventName: string, eventOptions: any): string {\n    const parts = [ eventName ]\n    Object.keys(eventOptions).sort().forEach(key => {\n      parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`)\n    })\n    return parts.join(\":\")\n  }\n}\n","export interface ActionDescriptor {\n  eventTarget: EventTarget\n  eventOptions: AddEventListenerOptions\n  eventName: string\n  identifier: string\n  methodName: string\n}\n\n// capture nos.:            12   23 4               43   1 5   56 7      768 9  98\nconst descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/\n\nexport function parseActionDescriptorString(descriptorString: string): Partial<ActionDescriptor> {\n  const source = descriptorString.trim()\n  const matches = source.match(descriptorPattern) || []\n  return {\n    eventTarget:  parseEventTarget(matches[4]),\n    eventName:    matches[2],\n    eventOptions: matches[9] ? parseEventOptions(matches[9]) : {},\n    identifier:   matches[5],\n    methodName:   matches[7]\n  }\n}\n\nfunction parseEventTarget(eventTargetName: string): EventTarget | undefined {\n  if (eventTargetName == \"window\") {\n    return window\n  } else if (eventTargetName == \"document\") {\n    return document\n  }\n}\n\nfunction parseEventOptions(eventOptions: string): AddEventListenerOptions {\n  return eventOptions.split(\":\").reduce((options, token) =>\n    Object.assign(options, { [token.replace(/^!/, \"\")]: !/^!/.test(token) })\n  , {})\n}\n\nexport function stringifyEventTarget(eventTarget: EventTarget) {\n  if (eventTarget == window) {\n    return \"window\"\n  } else if (eventTarget == document) {\n    return \"document\"\n  }\n}\n","import { ActionDescriptor, parseActionDescriptorString, stringifyEventTarget } from \"./action_descriptor\"\nimport { Token } from \"@stimulus/mutation-observers\"\n\nexport class Action {\n  readonly element: Element\n  readonly index: number\n  readonly eventTarget: EventTarget\n  readonly eventName: string\n  readonly eventOptions: AddEventListenerOptions\n  readonly identifier: string\n  readonly methodName: string\n\n  static forToken(token: Token) {\n    return new this(token.element, token.index, parseActionDescriptorString(token.content))\n  }\n\n  constructor(element: Element, index: number, descriptor: Partial<ActionDescriptor>) {\n    this.element      = element\n    this.index        = index\n    this.eventTarget  = descriptor.eventTarget || element\n    this.eventName    = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\")\n    this.eventOptions = descriptor.eventOptions || {}\n    this.identifier   = descriptor.identifier || error(\"missing identifier\")\n    this.methodName   = descriptor.methodName || error(\"missing method name\")\n  }\n\n  toString() {\n    const eventNameSuffix = this.eventTargetName ? `@${this.eventTargetName}` : \"\"\n    return `${this.eventName}${eventNameSuffix}->${this.identifier}#${this.methodName}`\n  }\n\n  private get eventTargetName() {\n    return stringifyEventTarget(this.eventTarget)\n  }\n}\n\nconst defaultEventNames: { [tagName: string]: (element: Element) => string } = {\n  \"a\":        e => \"click\",\n  \"button\":   e => \"click\",\n  \"form\":     e => \"submit\",\n  \"input\":    e => e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\",\n  \"select\":   e => \"change\",\n  \"textarea\": e => \"input\"\n}\n\nexport function getDefaultEventNameForElement(element: Element): string | undefined {\n  const tagName = element.tagName.toLowerCase()\n  if (tagName in defaultEventNames) {\n    return defaultEventNames[tagName](element)\n  }\n}\n\nfunction error(message: string): never {\n  throw new Error(message)\n}\n","import { Action } from \"./action\"\nimport { Context } from \"./context\"\nimport { Controller } from \"./controller\"\nimport { Scope } from \"./scope\"\n\nexport class Binding {\n  readonly context: Context\n  readonly action: Action\n\n  constructor(context: Context, action: Action) {\n    this.context = context\n    this.action = action\n  }\n\n  get index(): number {\n    return this.action.index\n  }\n\n  get eventTarget(): EventTarget {\n    return this.action.eventTarget\n  }\n\n  get eventOptions(): AddEventListenerOptions {\n    return this.action.eventOptions\n  }\n\n  get identifier(): string {\n    return this.context.identifier\n  }\n\n  handleEvent(event: Event) {\n    if (this.willBeInvokedByEvent(event)) {\n      this.invokeWithEvent(event)\n    }\n  }\n\n  get eventName(): string {\n    return this.action.eventName\n  }\n\n  get method(): Function {\n    const method = (this.controller as any)[this.methodName]\n    if (typeof method == \"function\") {\n      return method\n    }\n    throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`)\n  }\n\n  private invokeWithEvent(event: Event) {\n    try {\n      this.method.call(this.controller, event)\n    } catch (error) {\n      const { identifier, controller, element, index } = this\n      const detail = { identifier, controller, element, index, event }\n      this.context.handleError(error, `invoking action \"${this.action}\"`, detail)\n    }\n  }\n\n  private willBeInvokedByEvent(event: Event): boolean {\n    const eventTarget = event.target\n    if (this.element === eventTarget) {\n      return true\n    } else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n      return this.scope.containsElement(eventTarget)\n    } else {\n      return this.scope.containsElement(this.action.element)\n    }\n  }\n\n  private get controller(): Controller {\n    return this.context.controller\n  }\n\n  private get methodName(): string {\n    return this.action.methodName\n  }\n\n  private get element(): Element {\n    return this.scope.element\n  }\n\n  private get scope(): Scope {\n    return this.context.scope\n  }\n}\n","export interface ElementObserverDelegate {\n  matchElement(element: Element): boolean\n  matchElementsInTree(tree: Element): Element[]\n\n  elementMatched?(element: Element): void\n  elementUnmatched?(element: Element): void\n  elementAttributeChanged?(element: Element, attributeName: string): void\n}\n\nexport class ElementObserver {\n  element: Element\n  started: boolean\n  private delegate: ElementObserverDelegate\n\n  private elements: Set<Element>\n  private mutationObserver: MutationObserver\n\n  constructor(element: Element, delegate: ElementObserverDelegate) {\n    this.element = element\n    this.started = false\n    this.delegate = delegate\n\n    this.elements = new Set\n    this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations))\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true })\n      this.refresh()\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.mutationObserver.takeRecords()\n      this.mutationObserver.disconnect()\n      this.started = false\n    }\n  }\n\n  refresh() {\n    if (this.started) {\n      const matches = new Set(this.matchElementsInTree())\n\n      for (const element of Array.from(this.elements)) {\n        if (!matches.has(element)) {\n          this.removeElement(element)\n        }\n      }\n\n      for (const element of Array.from(matches)) {\n        this.addElement(element)\n      }\n    }\n  }\n\n  // Mutation record processing\n\n  private processMutations(mutations: MutationRecord[]) {\n    if (this.started) {\n      for (const mutation of mutations) {\n        this.processMutation(mutation)\n      }\n    }\n  }\n\n  private processMutation(mutation: MutationRecord) {\n    if (mutation.type == \"attributes\") {\n      this.processAttributeChange(mutation.target, mutation.attributeName!)\n    } else if (mutation.type == \"childList\") {\n      this.processRemovedNodes(mutation.removedNodes)\n      this.processAddedNodes(mutation.addedNodes)\n    }\n  }\n\n  private processAttributeChange(node: Node, attributeName: string) {\n    const element = node as Element\n    if (this.elements.has(element)) {\n      if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n        this.delegate.elementAttributeChanged(element, attributeName)\n      } else {\n        this.removeElement(element)\n      }\n    } else if (this.matchElement(element)) {\n      this.addElement(element)\n    }\n  }\n\n  private processRemovedNodes(nodes: NodeList) {\n    for (const node of Array.from(nodes)) {\n      const element = this.elementFromNode(node)\n      if (element) {\n        this.processTree(element, this.removeElement)\n      }\n    }\n  }\n\n  private processAddedNodes(nodes: NodeList) {\n    for (const node of Array.from(nodes)) {\n      const element = this.elementFromNode(node)\n      if (element && this.elementIsActive(element)) {\n        this.processTree(element, this.addElement)\n      }\n    }\n  }\n\n  // Element matching\n\n  private matchElement(element: Element): boolean {\n    return this.delegate.matchElement(element)\n  }\n\n  private matchElementsInTree(tree: Element = this.element): Element[] {\n    return this.delegate.matchElementsInTree(tree)\n  }\n\n  private processTree(tree: Element, processor: (element: Element) => void) {\n    for (const element of this.matchElementsInTree(tree)) {\n      processor.call(this, element)\n    }\n  }\n\n  private elementFromNode(node: Node): Element | undefined {\n    if (node.nodeType == Node.ELEMENT_NODE) {\n      return node as Element\n    }\n  }\n\n  private elementIsActive(element: Element): boolean {\n    if (element.isConnected != this.element.isConnected) {\n      return false\n    } else {\n      return this.element.contains(element)\n    }\n  }\n\n  // Element tracking\n\n  private addElement(element: Element) {\n    if (!this.elements.has(element)) {\n      if (this.elementIsActive(element)) {\n        this.elements.add(element)\n        if (this.delegate.elementMatched) {\n          this.delegate.elementMatched(element)\n        }\n      }\n    }\n  }\n\n  private removeElement(element: Element) {\n    if (this.elements.has(element)) {\n      this.elements.delete(element)\n      if (this.delegate.elementUnmatched) {\n        this.delegate.elementUnmatched(element)\n      }\n    }\n  }\n}\n","import { ElementObserver, ElementObserverDelegate } from \"./element_observer\"\n\nexport interface AttributeObserverDelegate {\n  elementMatchedAttribute?(element: Element, attributeName: string): void\n  elementAttributeValueChanged?(element: Element, attributeName: string): void\n  elementUnmatchedAttribute?(element: Element, attributeName: string): void\n}\n\nexport class AttributeObserver implements ElementObserverDelegate {\n  attributeName: string\n  private delegate: AttributeObserverDelegate\n\n  private elementObserver: ElementObserver\n\n  constructor(element: Element, attributeName: string, delegate: AttributeObserverDelegate) {\n    this.attributeName = attributeName\n    this.delegate = delegate\n\n    this.elementObserver = new ElementObserver(element, this)\n  }\n\n  get element(): Element {\n    return this.elementObserver.element\n  }\n\n  get selector(): string {\n    return `[${this.attributeName}]`\n  }\n\n  start() {\n    this.elementObserver.start()\n  }\n\n  stop() {\n    this.elementObserver.stop()\n  }\n\n  refresh() {\n    this.elementObserver.refresh()\n  }\n\n  get started(): boolean {\n    return this.elementObserver.started\n  }\n\n  // Element observer delegate\n\n  matchElement(element: Element): boolean {\n    return element.hasAttribute(this.attributeName)\n  }\n\n  matchElementsInTree(tree: Element): Element[] {\n    const match = this.matchElement(tree) ? [tree] : []\n    const matches = Array.from(tree.querySelectorAll(this.selector))\n    return match.concat(matches)\n  }\n\n  elementMatched(element: Element) {\n    if (this.delegate.elementMatchedAttribute) {\n      this.delegate.elementMatchedAttribute(element, this.attributeName)\n    }\n  }\n\n  elementUnmatched(element: Element) {\n    if (this.delegate.elementUnmatchedAttribute) {\n      this.delegate.elementUnmatchedAttribute(element, this.attributeName)\n    }\n  }\n\n  elementAttributeChanged(element: Element, attributeName: string) {\n    if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n      this.delegate.elementAttributeValueChanged(element, attributeName)\n    }\n  }\n}\n","export interface StringMapObserverDelegate {\n  getStringMapKeyForAttribute(attributeName: string): string | undefined\n  stringMapKeyAdded?(key: string, attributeName: string): void\n  stringMapValueChanged?(value: string | null, key: string): void\n  stringMapKeyRemoved?(key: string, attributeName: string): void\n}\n\nexport class StringMapObserver {\n  readonly element: Element\n  readonly delegate: StringMapObserverDelegate\n  private started: boolean\n  private stringMap: Map<string, string>\n  private mutationObserver: MutationObserver\n\n  constructor(element: Element, delegate: StringMapObserverDelegate) {\n    this.element = element\n    this.delegate = delegate\n    this.started = false\n    this.stringMap = new Map\n    this.mutationObserver = new MutationObserver(mutations => this.processMutations(mutations))\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      this.mutationObserver.observe(this.element, { attributes: true })\n      this.refresh()\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.mutationObserver.takeRecords()\n      this.mutationObserver.disconnect()\n      this.started = false\n    }\n  }\n\n  refresh() {\n    if (this.started) {\n      for (const attributeName of this.knownAttributeNames) {\n        this.refreshAttribute(attributeName)\n      }\n    }\n  }\n\n  // Mutation record processing\n\n  private processMutations(mutations: MutationRecord[]) {\n    if (this.started) {\n      for (const mutation of mutations) {\n        this.processMutation(mutation)\n      }\n    }\n  }\n\n  private processMutation(mutation: MutationRecord) {\n    const attributeName = mutation.attributeName\n    if (attributeName) {\n      this.refreshAttribute(attributeName)\n    }\n  }\n\n  // State tracking\n\n  private refreshAttribute(attributeName: string) {\n    const key = this.delegate.getStringMapKeyForAttribute(attributeName)\n    if (key != null) {\n      if (!this.stringMap.has(attributeName)) {\n        this.stringMapKeyAdded(key, attributeName)\n      }\n\n      const value = this.element.getAttribute(attributeName)\n      if (this.stringMap.get(attributeName) != value) {\n        this.stringMapValueChanged(value, key)\n      }\n\n      if (value == null) {\n        this.stringMap.delete(attributeName)\n        this.stringMapKeyRemoved(key, attributeName)\n      } else {\n        this.stringMap.set(attributeName, value)\n      }\n    }\n  }\n\n  private stringMapKeyAdded(key: string, attributeName: string) {\n    if (this.delegate.stringMapKeyAdded) {\n      this.delegate.stringMapKeyAdded(key, attributeName)\n    }\n  }\n\n  private stringMapValueChanged(value: string | null, key: string) {\n    if (this.delegate.stringMapValueChanged) {\n      this.delegate.stringMapValueChanged(value, key)\n    }\n  }\n\n  private stringMapKeyRemoved(key: string, attributeName: string) {\n    if (this.delegate.stringMapKeyRemoved) {\n      this.delegate.stringMapKeyRemoved(key, attributeName)\n    }\n  }\n\n  private get knownAttributeNames() {\n    return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))\n  }\n\n  private get currentAttributeNames() {\n    return Array.from(this.element.attributes).map(attribute => attribute.name)\n  }\n\n  private get recordedAttributeNames() {\n    return Array.from(this.stringMap.keys())\n  }\n}\n","export function add<K, V>(map: Map<K, Set<V>>, key: K, value: V) {\n  fetch(map, key).add(value)\n}\n\nexport function del<K, V>(map: Map<K, Set<V>>, key: K, value: V) {\n  fetch(map, key).delete(value)\n  prune(map, key)\n}\n\nexport function fetch<K, V>(map: Map<K, Set<V>>, key: K): Set<V> {\n  let values = map.get(key)\n  if (!values) {\n    values = new Set()\n    map.set(key, values)\n  }\n  return values\n}\n\nexport function prune<K, V>(map: Map<K, Set<V>>, key: K) {\n  const values = map.get(key)\n  if (values != null && values.size == 0) {\n    map.delete(key)\n  }\n}\n","import { add, del } from \"./set_operations\"\n\nexport class Multimap<K, V> {\n  private valuesByKey: Map<K, Set<V>>\n\n  constructor() {\n    this.valuesByKey = new Map<K, Set<V>>()\n  }\n\n  get values(): V[] {\n    const sets = Array.from(this.valuesByKey.values())\n    return sets.reduce((values, set) => values.concat(Array.from(set)), <V[]> [])\n  }\n\n  get size(): number {\n    const sets = Array.from(this.valuesByKey.values())\n    return sets.reduce((size, set) => size + set.size, 0)\n  }\n\n  add(key: K, value: V) {\n    add(this.valuesByKey, key, value)\n  }\n\n  delete(key: K, value: V) {\n    del(this.valuesByKey, key, value)\n  }\n\n  has(key: K, value: V): boolean {\n    const values = this.valuesByKey.get(key)\n    return values != null && values.has(value)\n  }\n\n  hasKey(key: K): boolean {\n    return this.valuesByKey.has(key)\n  }\n\n  hasValue(value: V): boolean {\n    const sets = Array.from(this.valuesByKey.values())\n    return sets.some(set => set.has(value))\n  }\n\n  getValuesForKey(key: K): V[] {\n    const values = this.valuesByKey.get(key)\n    return values ? Array.from(values) : []\n  }\n\n  getKeysForValue(value: V): K[] {\n    return Array.from(this.valuesByKey)\n      .filter(([key, values]) => values.has(value))\n      .map(([key, values]) => key)\n  }\n}\n","import { Multimap } from \"./multimap\"\nimport { add, del } from \"./set_operations\"\n\nexport class IndexedMultimap<K, V> extends Multimap<K, V> {\n  private keysByValue: Map<V, Set<K>>\n\n  constructor() {\n    super()\n    this.keysByValue = new Map\n  }\n\n  get values(): V[] {\n    return Array.from(this.keysByValue.keys())\n  }\n\n  add(key: K, value: V) {\n    super.add(key, value)\n    add(this.keysByValue, value, key)\n  }\n\n  delete(key: K, value: V) {\n    super.delete(key, value)\n    del(this.keysByValue, value, key)\n  }\n\n  hasValue(value: V): boolean {\n    return this.keysByValue.has(value)\n  }\n\n  getKeysForValue(value: V): K[] {\n    const set = this.keysByValue.get(value)\n    return set ? Array.from(set) : []\n  }\n}\n","import { AttributeObserver, AttributeObserverDelegate } from \"./attribute_observer\"\nimport { Multimap } from \"@stimulus/multimap\"\n\nexport interface Token {\n  element: Element\n  attributeName: string\n  index: number\n  content: string\n}\n\nexport interface TokenListObserverDelegate {\n  tokenMatched(token: Token): void\n  tokenUnmatched(token: Token): void\n}\n\nexport class TokenListObserver implements AttributeObserverDelegate {\n  private attributeObserver: AttributeObserver\n  private delegate: TokenListObserverDelegate\n  private tokensByElement: Multimap<Element, Token>\n\n  constructor(element: Element, attributeName: string, delegate: TokenListObserverDelegate) {\n    this.attributeObserver = new AttributeObserver(element, attributeName, this)\n    this.delegate = delegate\n    this.tokensByElement = new Multimap\n  }\n\n  get started(): boolean {\n    return this.attributeObserver.started\n  }\n\n  start() {\n    this.attributeObserver.start()\n  }\n\n  stop() {\n    this.attributeObserver.stop()\n  }\n\n  refresh() {\n    this.attributeObserver.refresh()\n  }\n\n  get element(): Element {\n    return this.attributeObserver.element\n  }\n\n  get attributeName(): string {\n    return this.attributeObserver.attributeName\n  }\n\n  // Attribute observer delegate\n\n  elementMatchedAttribute(element: Element) {\n    this.tokensMatched(this.readTokensForElement(element))\n  }\n\n  elementAttributeValueChanged(element: Element) {\n    const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element)\n    this.tokensUnmatched(unmatchedTokens)\n    this.tokensMatched(matchedTokens)\n  }\n\n  elementUnmatchedAttribute(element: Element) {\n    this.tokensUnmatched(this.tokensByElement.getValuesForKey(element))\n  }\n\n  private tokensMatched(tokens: Token[]) {\n    tokens.forEach(token => this.tokenMatched(token))\n  }\n\n  private tokensUnmatched(tokens: Token[]) {\n    tokens.forEach(token => this.tokenUnmatched(token))\n  }\n\n  private tokenMatched(token: Token) {\n    this.delegate.tokenMatched(token)\n    this.tokensByElement.add(token.element, token)\n  }\n\n  private tokenUnmatched(token: Token) {\n    this.delegate.tokenUnmatched(token)\n    this.tokensByElement.delete(token.element, token)\n  }\n\n  private refreshTokensForElement(element: Element): [Token[], Token[]] {\n    const previousTokens = this.tokensByElement.getValuesForKey(element)\n    const currentTokens = this.readTokensForElement(element)\n    const firstDifferingIndex = zip(previousTokens, currentTokens)\n      .findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken))\n\n    if (firstDifferingIndex == -1) {\n      return [[], []]\n    } else {\n      return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)]\n    }\n  }\n\n  private readTokensForElement(element: Element): Token[] {\n    const attributeName = this.attributeName\n    const tokenString = element.getAttribute(attributeName) || \"\"\n    return parseTokenString(tokenString, element, attributeName)\n  }\n}\n\nfunction parseTokenString(tokenString: string, element: Element, attributeName: string): Token[] {\n  return tokenString.trim().split(/\\s+/).filter(content => content.length)\n    .map((content, index) => ({ element, attributeName, content, index }))\n}\n\nfunction zip<L, R>(left: L[], right: R[]): [L | undefined, R | undefined][] {\n  const length = Math.max(left.length, right.length)\n  return Array.from({ length }, (_, index) => [left[index], right[index]] as [L, R])\n}\n\nfunction tokensAreEqual(left?: Token, right?: Token) {\n  return left && right && left.index == right.index && left.content == right.content\n}\n","import { Token, TokenListObserver, TokenListObserverDelegate } from \"./token_list_observer\"\n\nexport interface ValueListObserverDelegate<T> {\n  parseValueForToken(token: Token): T | undefined\n  elementMatchedValue(element: Element, value: T): void\n  elementUnmatchedValue(element: Element, value: T): void\n}\n\ninterface ParseResult<T> {\n  value?: T\n  error?: Error\n}\n\nexport class ValueListObserver<T> implements TokenListObserverDelegate {\n  private tokenListObserver: TokenListObserver\n  private delegate: ValueListObserverDelegate<T>\n  private parseResultsByToken: WeakMap<Token, ParseResult<T>>\n  private valuesByTokenByElement: WeakMap<Element, Map<Token, T>>\n\n  constructor(element: Element, attributeName: string, delegate: ValueListObserverDelegate<T>) {\n    this.tokenListObserver = new TokenListObserver(element, attributeName, this)\n    this.delegate = delegate\n    this.parseResultsByToken = new WeakMap\n    this.valuesByTokenByElement = new WeakMap\n  }\n\n  get started(): boolean {\n    return this.tokenListObserver.started\n  }\n\n  start() {\n    this.tokenListObserver.start()\n  }\n\n  stop() {\n    this.tokenListObserver.stop()\n  }\n\n  refresh() {\n    this.tokenListObserver.refresh()\n  }\n\n  get element(): Element {\n    return this.tokenListObserver.element\n  }\n\n  get attributeName(): string {\n    return this.tokenListObserver.attributeName\n  }\n\n  tokenMatched(token: Token) {\n    const { element } = token\n    const { value } = this.fetchParseResultForToken(token)\n    if (value) {\n      this.fetchValuesByTokenForElement(element).set(token, value)\n      this.delegate.elementMatchedValue(element, value)\n    }\n  }\n\n  tokenUnmatched(token: Token) {\n    const { element } = token\n    const { value } = this.fetchParseResultForToken(token)\n    if (value) {\n      this.fetchValuesByTokenForElement(element).delete(token)\n      this.delegate.elementUnmatchedValue(element, value)\n    }\n  }\n\n  private fetchParseResultForToken(token: Token) {\n    let parseResult = this.parseResultsByToken.get(token)\n    if (!parseResult) {\n      parseResult = this.parseToken(token)\n      this.parseResultsByToken.set(token, parseResult)\n    }\n    return parseResult\n  }\n\n  private fetchValuesByTokenForElement(element: Element) {\n    let valuesByToken = this.valuesByTokenByElement.get(element)\n    if (!valuesByToken) {\n      valuesByToken = new Map\n      this.valuesByTokenByElement.set(element, valuesByToken)\n    }\n    return valuesByToken\n  }\n\n  private parseToken(token: Token): ParseResult<T> {\n    try {\n      const value = this.delegate.parseValueForToken(token)\n      return { value }\n    } catch (error) {\n      return { error }\n    }\n  }\n}\n","import { Action } from \"./action\"\nimport { Binding } from \"./binding\"\nimport { Context } from \"./context\"\nimport { ErrorHandler } from \"./error_handler\"\nimport { Schema } from \"./schema\"\nimport { Token, ValueListObserver, ValueListObserverDelegate } from \"@stimulus/mutation-observers\"\n\nexport interface BindingObserverDelegate extends ErrorHandler {\n  bindingConnected(binding: Binding): void\n  bindingDisconnected(binding: Binding): void\n}\n\nexport class BindingObserver implements ValueListObserverDelegate<Action> {\n  readonly context: Context\n  private delegate: BindingObserverDelegate\n  private valueListObserver?: ValueListObserver<Action>\n  private bindingsByAction: Map<Action, Binding>\n\n  constructor(context: Context, delegate: BindingObserverDelegate) {\n    this.context = context\n    this.delegate = delegate\n    this.bindingsByAction = new Map\n  }\n\n  start() {\n    if (!this.valueListObserver) {\n      this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this)\n      this.valueListObserver.start()\n    }\n  }\n\n  stop() {\n    if (this.valueListObserver) {\n      this.valueListObserver.stop()\n      delete this.valueListObserver\n      this.disconnectAllActions()\n    }\n  }\n\n  get element() {\n    return this.context.element\n  }\n\n  get identifier() {\n    return this.context.identifier\n  }\n\n  get actionAttribute() {\n    return this.schema.actionAttribute\n  }\n\n  get schema(): Schema {\n    return this.context.schema\n  }\n\n  get bindings(): Binding[] {\n    return Array.from(this.bindingsByAction.values())\n  }\n\n  private connectAction(action: Action) {\n    const binding = new Binding(this.context, action)\n    this.bindingsByAction.set(action, binding)\n    this.delegate.bindingConnected(binding)\n  }\n\n  private disconnectAction(action: Action) {\n    const binding = this.bindingsByAction.get(action)\n    if (binding) {\n      this.bindingsByAction.delete(action)\n      this.delegate.bindingDisconnected(binding)\n    }\n  }\n\n  private disconnectAllActions() {\n    this.bindings.forEach(binding => this.delegate.bindingDisconnected(binding))\n    this.bindingsByAction.clear()\n  }\n\n  // Value observer delegate\n\n  parseValueForToken(token: Token): Action | undefined {\n    const action = Action.forToken(token)\n    if (action.identifier == this.identifier) {\n      return action\n    }\n  }\n\n  elementMatchedValue(element: Element, action: Action) {\n    this.connectAction(action)\n  }\n\n  elementUnmatchedValue(element: Element, action: Action) {\n    this.disconnectAction(action)\n  }\n}\n","import { Context } from \"./context\"\nimport { StringMapObserver, StringMapObserverDelegate } from \"@stimulus/mutation-observers\"\nimport { ValueDescriptor } from \"./value_properties\"\n\nexport class ValueObserver implements StringMapObserverDelegate {\n  readonly context: Context\n  readonly receiver: any\n  private stringMapObserver: StringMapObserver\n  private valueDescriptorMap: { [attributeName: string]: ValueDescriptor }\n\n  constructor(context: Context, receiver: any) {\n    this.context = context\n    this.receiver = receiver\n    this.stringMapObserver = new StringMapObserver(this.element, this)\n    this.valueDescriptorMap = (this.controller as any).valueDescriptorMap\n    this.invokeChangedCallbacksForDefaultValues()\n  }\n\n  start() {\n    this.stringMapObserver.start()\n  }\n\n  stop() {\n    this.stringMapObserver.stop()\n  }\n\n  get element() {\n    return this.context.element\n  }\n\n  get controller() {\n    return this.context.controller\n  }\n\n  // String map observer delegate\n\n  getStringMapKeyForAttribute(attributeName: string) {\n    if (attributeName in this.valueDescriptorMap) {\n      return this.valueDescriptorMap[attributeName].name\n    }\n  }\n\n  stringMapValueChanged(attributeValue: string | null, name: string) {\n    this.invokeChangedCallbackForValue(name)\n  }\n\n  private invokeChangedCallbacksForDefaultValues() {\n    for (const { key, name, defaultValue } of this.valueDescriptors) {\n      if (defaultValue != undefined && !this.controller.data.has(key)) {\n        this.invokeChangedCallbackForValue(name)\n      }\n    }\n  }\n\n  private invokeChangedCallbackForValue(name: string) {\n    const methodName = `${name}Changed`\n    const method = this.receiver[methodName]\n    if (typeof method == \"function\") {\n      const value = this.receiver[name]\n      method.call(this.receiver, value)\n    }\n  }\n\n  private get valueDescriptors() {\n    const { valueDescriptorMap } = this\n    return Object.keys(valueDescriptorMap).map(key => valueDescriptorMap[key])\n  }\n}\n","import { Application } from \"./application\"\nimport { BindingObserver } from \"./binding_observer\"\nimport { Controller } from \"./controller\"\nimport { Dispatcher } from \"./dispatcher\"\nimport { ErrorHandler } from \"./error_handler\"\nimport { Module } from \"./module\"\nimport { Schema } from \"./schema\"\nimport { Scope } from \"./scope\"\nimport { ValueObserver } from \"./value_observer\"\n\nexport class Context implements ErrorHandler {\n  readonly module: Module\n  readonly scope: Scope\n  readonly controller: Controller\n  private bindingObserver: BindingObserver\n  private valueObserver: ValueObserver\n\n  constructor(module: Module, scope: Scope) {\n    this.module = module\n    this.scope = scope\n    this.controller = new module.controllerConstructor(this)\n    this.bindingObserver = new BindingObserver(this, this.dispatcher)\n    this.valueObserver = new ValueObserver(this, this.controller)\n\n    try {\n      this.controller.initialize()\n    } catch (error) {\n      this.handleError(error, \"initializing controller\")\n    }\n  }\n\n  connect() {\n    this.bindingObserver.start()\n    this.valueObserver.start()\n\n    try {\n      this.controller.connect()\n    } catch (error) {\n      this.handleError(error, \"connecting controller\")\n    }\n  }\n\n  disconnect() {\n    try {\n      this.controller.disconnect()\n    } catch (error) {\n      this.handleError(error, \"disconnecting controller\")\n    }\n\n    this.valueObserver.stop()\n    this.bindingObserver.stop()\n  }\n\n  get application(): Application {\n    return this.module.application\n  }\n\n  get identifier(): string {\n    return this.module.identifier\n  }\n\n  get schema(): Schema {\n    return this.application.schema\n  }\n\n  get dispatcher(): Dispatcher {\n    return this.application.dispatcher\n  }\n\n  get element(): Element {\n    return this.scope.element\n  }\n\n  get parentElement(): Element | null {\n    return this.element.parentElement\n  }\n\n  // Error handling\n\n  handleError(error: Error, message: string, detail: object = {}) {\n    const { identifier, controller, element } = this\n    detail = Object.assign({ identifier, controller, element }, detail)\n    this.application.handleError(error, `Error ${message}`, detail)\n  }\n}\n","import { Constructor } from \"./constructor\"\n\nexport function readInheritableStaticArrayValues<T, U = string>(constructor: Constructor<T>, propertyName: string) {\n  const ancestors = getAncestorsForConstructor(constructor)\n  return Array.from(ancestors.reduce((values, constructor) => {\n    getOwnStaticArrayValues(constructor, propertyName).forEach(name => values.add(name))\n    return values\n  }, new Set as Set<U>))\n}\n\nexport function readInheritableStaticObjectPairs<T, U>(constructor: Constructor<T>, propertyName: string) {\n  const ancestors = getAncestorsForConstructor(constructor)\n  return ancestors.reduce((pairs, constructor) => {\n    pairs.push(...getOwnStaticObjectPairs(constructor, propertyName) as any)\n    return pairs\n  }, [] as [string, U][])\n}\n\nfunction getAncestorsForConstructor<T>(constructor: Constructor<T>) {\n  const ancestors: Constructor<{}>[] = []\n  while (constructor) {\n    ancestors.push(constructor)\n    constructor = Object.getPrototypeOf(constructor)\n  }\n  return ancestors.reverse()\n}\n\nfunction getOwnStaticArrayValues<T>(constructor: Constructor<T>, propertyName: string) {\n  const definition = (constructor as any)[propertyName]\n  return Array.isArray(definition) ? definition : []\n}\n\nfunction getOwnStaticObjectPairs<T, U>(constructor: Constructor<T>, propertyName: string) {\n  const definition = (constructor as any)[propertyName]\n  return definition ? Object.keys(definition).map(key => [key, definition[key]] as [string, U]) : []\n}\n","import { Constructor } from \"./constructor\"\nimport { readInheritableStaticArrayValues } from \"./inheritable_statics\"\n\n/** @hidden */\nexport type Blessing<T> = (constructor: Constructor<T>) => PropertyDescriptorMap\n\n/** @hidden */\nexport interface Blessable<T> extends Constructor<T> {\n  readonly blessings?: Blessing<T>[]\n}\n\n/** @hidden */\nexport function bless<T>(constructor: Blessable<T>): Constructor<T> {\n  return shadow(constructor, getBlessedProperties(constructor))\n}\n\nfunction shadow<T>(constructor: Constructor<T>, properties: PropertyDescriptorMap) {\n  const shadowConstructor = extend(constructor)\n  const shadowProperties = getShadowProperties(constructor.prototype, properties)\n  Object.defineProperties(shadowConstructor.prototype, shadowProperties)\n  return shadowConstructor\n}\n\nfunction getBlessedProperties<T>(constructor: Constructor<T>) {\n  const blessings = readInheritableStaticArrayValues(constructor, \"blessings\") as Blessing<T>[]\n  return blessings.reduce((blessedProperties, blessing) => {\n    const properties = blessing(constructor)\n    for (const key in properties) {\n      const descriptor = blessedProperties[key] || {} as PropertyDescriptor\n      blessedProperties[key] = Object.assign(descriptor, properties[key])\n    }\n    return blessedProperties\n  }, {} as PropertyDescriptorMap)\n}\n\nfunction getShadowProperties<T>(prototype: any, properties: PropertyDescriptorMap) {\n  return getOwnKeys(properties).reduce((shadowProperties, key) => {\n    const descriptor = getShadowedDescriptor(prototype, properties, key)\n    if (descriptor) {\n      Object.assign(shadowProperties, { [key]: descriptor })\n    }\n    return shadowProperties\n  }, {} as PropertyDescriptorMap)\n}\n\nfunction getShadowedDescriptor(prototype: any, properties: PropertyDescriptorMap, key: string | symbol) {\n  const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key)\n  const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor\n  if (!shadowedByValue) {\n    const descriptor = Object.getOwnPropertyDescriptor(properties, key)!.value\n    if (shadowingDescriptor) {\n      descriptor.get = shadowingDescriptor.get || descriptor.get\n      descriptor.set = shadowingDescriptor.set || descriptor.set\n    }\n    return descriptor\n  }\n}\n\nconst getOwnKeys = (() => {\n  if (typeof Object.getOwnPropertySymbols == \"function\") {\n    return (object: any) => [\n      ...Object.getOwnPropertyNames(object),\n      ...Object.getOwnPropertySymbols(object)\n    ]\n  } else {\n    return Object.getOwnPropertyNames\n  }\n})()\n\nconst extend = (() => {\n  function extendWithReflect<T extends Constructor<{}>>(constructor: T): T {\n    function extended() {\n      return Reflect.construct(constructor, arguments, new.target)\n    }\n\n    extended.prototype = Object.create(constructor.prototype, {\n      constructor: { value: extended }\n    })\n\n    Reflect.setPrototypeOf(extended, constructor)\n    return extended as any\n  }\n\n  function testReflectExtension() {\n    const a = function(this: any) { this.a.call(this) } as any\n    const b = extendWithReflect(a)\n    b.prototype.a = function() {}\n    return new b\n  }\n\n  try {\n    testReflectExtension()\n    return extendWithReflect\n  } catch (error) {\n    return <T extends Constructor<{}>>(constructor: T) => class extended extends constructor {}\n  }\n})()\n","import { bless } from \"./blessing\"\nimport { ControllerConstructor } from \"./controller\"\n\nexport interface Definition {\n  identifier: string\n  controllerConstructor: ControllerConstructor\n}\n\n/** @hidden */\nexport function blessDefinition(definition: Definition): Definition {\n  return {\n    identifier: definition.identifier,\n    controllerConstructor: bless(definition.controllerConstructor)\n  }\n}\n","import { Application } from \"./application\"\nimport { Context } from \"./context\"\nimport { ControllerConstructor } from \"./controller\"\nimport { Definition, blessDefinition } from \"./definition\"\nimport { Scope } from \"./scope\"\n\nexport class Module {\n  readonly application: Application\n  readonly definition: Definition\n  private contextsByScope: WeakMap<Scope, Context>\n  private connectedContexts: Set<Context>\n\n  constructor(application: Application, definition: Definition) {\n    this.application = application\n    this.definition = blessDefinition(definition)\n    this.contextsByScope = new WeakMap\n    this.connectedContexts = new Set\n  }\n\n  get identifier(): string {\n    return this.definition.identifier\n  }\n\n  get controllerConstructor(): ControllerConstructor {\n    return this.definition.controllerConstructor\n  }\n\n  get contexts(): Context[] {\n    return Array.from(this.connectedContexts)\n  }\n\n  connectContextForScope(scope: Scope) {\n    const context = this.fetchContextForScope(scope)\n    this.connectedContexts.add(context)\n    context.connect()\n  }\n\n  disconnectContextForScope(scope: Scope) {\n    const context = this.contextsByScope.get(scope)\n    if (context) {\n      this.connectedContexts.delete(context)\n      context.disconnect()\n    }\n  }\n\n  private fetchContextForScope(scope: Scope): Context {\n    let context = this.contextsByScope.get(scope)\n    if (!context) {\n      context = new Context(this, scope)\n      this.contextsByScope.set(scope, context)\n    }\n    return context\n  }\n}\n","import { Scope } from \"./scope\"\n\nexport class ClassMap {\n  readonly scope: Scope\n\n  constructor(scope: Scope) {\n    this.scope = scope\n  }\n\n  has(name: string) {\n    return this.data.has(this.getDataKey(name))\n  }\n\n  get(name: string) {\n    return this.data.get(this.getDataKey(name))\n  }\n\n  getAttributeName(name: string) {\n    return this.data.getAttributeNameForKey(this.getDataKey(name))\n  }\n\n  getDataKey(name: string) {\n    return `${name}-class`\n  }\n\n  get data() {\n    return this.scope.data\n  }\n}\n","export function camelize(value: string) {\n  return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase())\n}\n\nexport function capitalize(value: string) {\n  return value.charAt(0).toUpperCase() + value.slice(1)\n}\n\nexport function dasherize(value: string) {\n  return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`)\n}\n","import { Scope } from \"./scope\"\nimport { dasherize } from \"./string_helpers\"\n\nexport class DataMap {\n  readonly scope: Scope\n\n  constructor(scope: Scope) {\n    this.scope = scope\n  }\n\n  get element(): Element {\n    return this.scope.element\n  }\n\n  get identifier(): string {\n    return this.scope.identifier\n  }\n\n  get(key: string): string | null {\n    const name = this.getAttributeNameForKey(key)\n    return this.element.getAttribute(name)\n  }\n\n  set(key: string, value: string): string | null {\n    const name = this.getAttributeNameForKey(key)\n    this.element.setAttribute(name, value)\n    return this.get(key)\n  }\n\n  has(key: string): boolean {\n    const name = this.getAttributeNameForKey(key)\n    return this.element.hasAttribute(name)\n  }\n\n  delete(key: string): boolean {\n    if (this.has(key)) {\n      const name = this.getAttributeNameForKey(key)\n      this.element.removeAttribute(name)\n      return true\n    } else {\n      return false\n    }\n  }\n\n  getAttributeNameForKey(key: string): string {\n    return `data-${this.identifier}-${dasherize(key)}`\n  }\n}\n","import { Logger } from \"./logger\"\n\nexport class Guide {\n  readonly logger: Logger\n  readonly warnedKeysByObject: WeakMap<any, Set<string>> = new WeakMap\n\n  constructor(logger: Logger) {\n    this.logger = logger\n  }\n\n  warn(object: any, key: string, message: string) {\n    let warnedKeys: Set<string> | undefined = this.warnedKeysByObject.get(object)\n\n    if (!warnedKeys) {\n      warnedKeys = new Set\n      this.warnedKeysByObject.set(object, warnedKeys)\n    }\n\n    if (!warnedKeys.has(key)) {\n      warnedKeys.add(key)\n      this.logger.warn(message, object)\n    }\n  }\n}\n","/** @hidden */\nexport function attributeValueContainsToken(attributeName: string, token: string) {\n  return `[${attributeName}~=\"${token}\"]`\n}\n","import { Scope } from \"./scope\"\nimport { attributeValueContainsToken } from \"./selectors\"\n\nexport class TargetSet {\n  readonly scope: Scope\n\n  constructor(scope: Scope) {\n    this.scope = scope\n  }\n\n  get element() {\n    return this.scope.element\n  }\n\n  get identifier() {\n    return this.scope.identifier\n  }\n\n  get schema() {\n    return this.scope.schema\n  }\n\n  has(targetName: string) {\n    return this.find(targetName) != null\n  }\n\n  find(...targetNames: string[]) {\n    return targetNames.reduce((target, targetName) =>\n         target\n      || this.findTarget(targetName)\n      || this.findLegacyTarget(targetName)\n    , undefined as Element | undefined)\n  }\n\n  findAll(...targetNames: string[]) {\n    return targetNames.reduce((targets, targetName) => [\n      ...targets,\n      ...this.findAllTargets(targetName),\n      ...this.findAllLegacyTargets(targetName)\n    ], [] as Element[])\n  }\n\n  private findTarget(targetName: string) {\n    const selector = this.getSelectorForTargetName(targetName)\n    return this.scope.findElement(selector)\n  }\n\n  private findAllTargets(targetName: string) {\n    const selector = this.getSelectorForTargetName(targetName)\n    return this.scope.findAllElements(selector)\n  }\n\n  private getSelectorForTargetName(targetName: string) {\n    const attributeName = `data-${this.identifier}-target`\n    return attributeValueContainsToken(attributeName, targetName)\n  }\n\n  private findLegacyTarget(targetName: string) {\n    const selector = this.getLegacySelectorForTargetName(targetName)\n    return this.deprecate(this.scope.findElement(selector), targetName)\n  }\n\n  private findAllLegacyTargets(targetName: string) {\n    const selector = this.getLegacySelectorForTargetName(targetName)\n    return this.scope.findAllElements(selector).map(element => this.deprecate(element, targetName))\n  }\n\n  private getLegacySelectorForTargetName(targetName: string) {\n    const targetDescriptor = `${this.identifier}.${targetName}`\n    return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor)\n  }\n\n  private deprecate<T>(element: T, targetName: string) {\n    if (element) {\n      const { identifier } = this\n      const attributeName = this.schema.targetAttribute\n      this.guide.warn(element, `target:${targetName}`,\n        `Please replace ${attributeName}=\"${identifier}.${targetName}\" with data-${identifier}-target=\"${targetName}\". ` +\n        `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`)\n    }\n    return element\n  }\n\n  private get guide() {\n    return this.scope.guide\n  }\n}\n","import { ClassMap } from \"./class_map\"\nimport { DataMap } from \"./data_map\"\nimport { Guide } from \"./guide\"\nimport { Logger } from \"./logger\"\nimport { Schema } from \"./schema\"\nimport { attributeValueContainsToken } from \"./selectors\"\nimport { TargetSet } from \"./target_set\"\n\nexport class Scope {\n  readonly schema: Schema\n  readonly element: Element\n  readonly identifier: string\n  readonly guide: Guide\n  readonly targets = new TargetSet(this)\n  readonly classes = new ClassMap(this)\n  readonly data = new DataMap(this)\n\n  constructor(schema: Schema, element: Element, identifier: string, logger: Logger) {\n    this.schema = schema\n    this.element = element\n    this.identifier = identifier\n    this.guide = new Guide(logger)\n  }\n\n  findElement(selector: string): Element | undefined {\n    return this.element.matches(selector)\n      ? this.element\n      : this.queryElements(selector).find(this.containsElement)\n  }\n\n  findAllElements(selector: string): Element[] {\n    return [\n      ...this.element.matches(selector) ? [this.element] : [],\n      ...this.queryElements(selector).filter(this.containsElement)\n    ]\n  }\n\n  containsElement = (element: Element): boolean => {\n    return element.closest(this.controllerSelector) === this.element\n  }\n\n  private queryElements(selector: string): Element[] {\n    return Array.from(this.element.querySelectorAll(selector))\n  }\n\n  private get controllerSelector(): string {\n    return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier)\n  }\n}\n","import { ErrorHandler } from \"./error_handler\"\nimport { Schema } from \"./schema\"\nimport { Scope } from \"./scope\"\nimport { Token, ValueListObserver, ValueListObserverDelegate } from \"@stimulus/mutation-observers\"\n\nexport interface ScopeObserverDelegate extends ErrorHandler {\n  createScopeForElementAndIdentifier(element: Element, identifier: string): Scope\n  scopeConnected(scope: Scope): void\n  scopeDisconnected(scope: Scope): void\n}\n\nexport class ScopeObserver implements ValueListObserverDelegate<Scope> {\n  readonly element: Element\n  readonly schema: Schema\n  private delegate: ScopeObserverDelegate\n  private valueListObserver: ValueListObserver<Scope>\n  private scopesByIdentifierByElement: WeakMap<Element, Map<string, Scope>>\n  private scopeReferenceCounts: WeakMap<Scope, number>\n\n  constructor(element: Element, schema: Schema, delegate: ScopeObserverDelegate) {\n    this.element = element\n    this.schema = schema\n    this.delegate = delegate\n    this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this)\n    this.scopesByIdentifierByElement = new WeakMap\n    this.scopeReferenceCounts = new WeakMap\n  }\n\n  start() {\n    this.valueListObserver.start()\n  }\n\n  stop() {\n    this.valueListObserver.stop()\n  }\n\n  get controllerAttribute() {\n    return this.schema.controllerAttribute\n  }\n\n  // Value observer delegate\n\n  /** @hidden */\n  parseValueForToken(token: Token): Scope | undefined {\n    const { element, content: identifier } = token\n    const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element)\n\n    let scope = scopesByIdentifier.get(identifier)\n    if (!scope) {\n      scope = this.delegate.createScopeForElementAndIdentifier(element, identifier)\n      scopesByIdentifier.set(identifier, scope)\n    }\n\n    return scope\n  }\n\n  /** @hidden */\n  elementMatchedValue(element: Element, value: Scope) {\n    const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1\n    this.scopeReferenceCounts.set(value, referenceCount)\n    if (referenceCount == 1) {\n      this.delegate.scopeConnected(value)\n    }\n  }\n\n  /** @hidden */\n  elementUnmatchedValue(element: Element, value: Scope) {\n    const referenceCount = this.scopeReferenceCounts.get(value)\n    if (referenceCount) {\n      this.scopeReferenceCounts.set(value, referenceCount - 1)\n      if (referenceCount == 1) {\n        this.delegate.scopeDisconnected(value)\n      }\n    }\n  }\n\n  private fetchScopesByIdentifierForElement(element: Element) {\n    let scopesByIdentifier = this.scopesByIdentifierByElement.get(element)\n    if (!scopesByIdentifier) {\n      scopesByIdentifier = new Map\n      this.scopesByIdentifierByElement.set(element, scopesByIdentifier)\n    }\n    return scopesByIdentifier\n  }\n}\n","import { Application } from \"./application\"\nimport { Context } from \"./context\"\nimport { Definition } from \"./definition\"\nimport { Module } from \"./module\"\nimport { Multimap } from \"@stimulus/multimap\"\nimport { Scope } from \"./scope\"\nimport { ScopeObserver, ScopeObserverDelegate } from \"./scope_observer\"\n\nexport class Router implements ScopeObserverDelegate {\n  readonly application: Application\n  private scopeObserver: ScopeObserver\n  private scopesByIdentifier: Multimap<string, Scope>\n  private modulesByIdentifier: Map<string, Module>\n\n  constructor(application: Application) {\n    this.application = application\n    this.scopeObserver = new ScopeObserver(this.element, this.schema, this)\n    this.scopesByIdentifier = new Multimap\n    this.modulesByIdentifier = new Map\n  }\n\n  get element() {\n    return this.application.element\n  }\n\n  get schema() {\n    return this.application.schema\n  }\n\n  get logger() {\n    return this.application.logger\n  }\n\n  get controllerAttribute(): string {\n    return this.schema.controllerAttribute\n  }\n\n  get modules() {\n    return Array.from(this.modulesByIdentifier.values())\n  }\n\n  get contexts() {\n    return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), [] as Context[])\n  }\n\n  start() {\n    this.scopeObserver.start()\n  }\n\n  stop() {\n    this.scopeObserver.stop()\n  }\n\n  loadDefinition(definition: Definition) {\n    this.unloadIdentifier(definition.identifier)\n    const module = new Module(this.application, definition)\n    this.connectModule(module)\n  }\n\n  unloadIdentifier(identifier: string) {\n    const module = this.modulesByIdentifier.get(identifier)\n    if (module) {\n      this.disconnectModule(module)\n    }\n  }\n\n  getContextForElementAndIdentifier(element: Element, identifier: string) {\n    const module = this.modulesByIdentifier.get(identifier)\n    if (module) {\n      return module.contexts.find(context => context.element == element)\n    }\n  }\n\n  // Error handler delegate\n\n  /** @hidden */\n  handleError(error: Error, message: string, detail: any) {\n    this.application.handleError(error, message, detail)\n  }\n\n  // Scope observer delegate\n\n  /** @hidden */\n  createScopeForElementAndIdentifier(element: Element, identifier: string) {\n    return new Scope(this.schema, element, identifier, this.logger)\n  }\n\n  /** @hidden */\n  scopeConnected(scope: Scope) {\n    this.scopesByIdentifier.add(scope.identifier, scope)\n    const module = this.modulesByIdentifier.get(scope.identifier)\n    if (module) {\n      module.connectContextForScope(scope)\n    }\n  }\n\n  /** @hidden */\n  scopeDisconnected(scope: Scope) {\n    this.scopesByIdentifier.delete(scope.identifier, scope)\n    const module = this.modulesByIdentifier.get(scope.identifier)\n    if (module) {\n      module.disconnectContextForScope(scope)\n    }\n  }\n\n  // Modules\n\n  private connectModule(module: Module) {\n    this.modulesByIdentifier.set(module.identifier, module)\n    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier)\n    scopes.forEach(scope => module.connectContextForScope(scope))\n  }\n\n  private disconnectModule(module: Module) {\n    this.modulesByIdentifier.delete(module.identifier)\n    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier)\n    scopes.forEach(scope => module.disconnectContextForScope(scope))\n  }\n}\n","export interface Schema {\n  controllerAttribute: string\n  actionAttribute: string\n  targetAttribute: string\n}\n\nexport const defaultSchema: Schema = {\n  controllerAttribute: \"data-controller\",\n  actionAttribute: \"data-action\",\n  targetAttribute: \"data-target\"\n}\n","import { Controller, ControllerConstructor } from \"./controller\"\nimport { Definition } from \"./definition\"\nimport { Dispatcher } from \"./dispatcher\"\nimport { ErrorHandler } from \"./error_handler\"\nimport { Logger } from \"./logger\"\nimport { Router } from \"./router\"\nimport { Schema, defaultSchema } from \"./schema\"\n\nexport class Application implements ErrorHandler {\n  readonly element: Element\n  readonly schema: Schema\n  readonly dispatcher: Dispatcher\n  readonly router: Router\n  logger: Logger = console\n\n  static start(element?: Element, schema?: Schema): Application {\n    const application = new Application(element, schema)\n    application.start()\n    return application\n  }\n\n  constructor(element: Element = document.documentElement, schema: Schema = defaultSchema) {\n    this.element = element\n    this.schema = schema\n    this.dispatcher = new Dispatcher(this)\n    this.router = new Router(this)\n  }\n\n  async start() {\n    await domReady()\n    this.dispatcher.start()\n    this.router.start()\n  }\n\n  stop() {\n    this.dispatcher.stop()\n    this.router.stop()\n  }\n\n  register(identifier: string, controllerConstructor: ControllerConstructor) {\n    this.load({ identifier, controllerConstructor })\n  }\n\n  load(...definitions: Definition[]): void\n  load(definitions: Definition[]): void\n  load(head: Definition | Definition[], ...rest: Definition[]) {\n    const definitions = Array.isArray(head) ? head : [head, ...rest]\n    definitions.forEach(definition => this.router.loadDefinition(definition))\n  }\n\n  unload(...identifiers: string[]): void\n  unload(identifiers: string[]): void\n  unload(head: string | string[], ...rest: string[]) {\n    const identifiers = Array.isArray(head) ? head : [head, ...rest]\n    identifiers.forEach(identifier => this.router.unloadIdentifier(identifier))\n  }\n\n  // Controllers\n\n  get controllers(): Controller[] {\n    return this.router.contexts.map(context => context.controller)\n  }\n\n  getControllerForElementAndIdentifier(element: Element, identifier: string): Controller | null {\n    const context = this.router.getContextForElementAndIdentifier(element, identifier)\n    return context ? context.controller : null\n  }\n\n  // Error handling\n\n  handleError(error: Error, message: string, detail: object) {\n    this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail)\n  }\n}\n\nfunction domReady(): Promise<any> {\n  return new Promise(resolve => {\n    if (document.readyState == \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", resolve)\n    } else {\n      resolve()\n    }\n  })\n}\n","import { Constructor } from \"./constructor\"\nimport { Controller } from \"./controller\"\nimport { readInheritableStaticArrayValues } from \"./inheritable_statics\"\nimport { capitalize } from \"./string_helpers\"\n\n/** @hidden */\nexport function ClassPropertiesBlessing<T>(constructor: Constructor<T>) {\n  const classes = readInheritableStaticArrayValues(constructor, \"classes\")\n  return classes.reduce((properties, classDefinition) => {\n    return Object.assign(properties, propertiesForClassDefinition(classDefinition))\n  }, {} as PropertyDescriptorMap)\n}\n\nfunction propertiesForClassDefinition(key: string) {\n  const name = `${key}Class`\n\n  return {\n    [name]: {\n      get(this: Controller) {\n        const { classes } = this\n        if (classes.has(key)) {\n          return classes.get(key)\n        } else {\n          const attribute = classes.getAttributeName(key)\n          throw new Error(`Missing attribute \"${attribute}\"`)\n        }\n      }\n    },\n\n    [`has${capitalize(name)}`]: {\n      get(this: Controller) {\n        return this.classes.has(key)\n      }\n    }\n  }\n}\n","import { Constructor } from \"./constructor\"\nimport { Controller } from \"./controller\"\nimport { readInheritableStaticArrayValues } from \"./inheritable_statics\"\nimport { capitalize } from \"./string_helpers\"\n\n/** @hidden */\nexport function TargetPropertiesBlessing<T>(constructor: Constructor<T>) {\n  const targets = readInheritableStaticArrayValues(constructor, \"targets\")\n  return targets.reduce((properties, targetDefinition) => {\n    return Object.assign(properties, propertiesForTargetDefinition(targetDefinition))\n  }, {} as PropertyDescriptorMap)\n}\n\nfunction propertiesForTargetDefinition(name: string) {\n  return {\n    [`${name}Target`]: {\n      get(this: Controller) {\n        const target = this.targets.find(name)\n        if (target) {\n          return target\n        } else {\n          throw new Error(`Missing target element \"${this.identifier}.${name}\"`)\n        }\n      }\n    },\n\n    [`${name}Targets`]: {\n      get(this: Controller) {\n        return this.targets.findAll(name)\n      }\n    },\n\n    [`has${capitalize(name)}Target`]: {\n      get(this: Controller) {\n        return this.targets.has(name)\n      }\n    }\n  }\n}\n","import { Constructor } from \"./constructor\"\nimport { Controller } from \"./controller\"\nimport { readInheritableStaticObjectPairs } from \"./inheritable_statics\"\nimport { camelize, capitalize, dasherize } from \"./string_helpers\"\n\n/** @hidden */\nexport function ValuePropertiesBlessing<T>(constructor: Constructor<T>) {\n  const valueDefinitionPairs = readInheritableStaticObjectPairs<T, ValueTypeConstant>(constructor, \"values\")\n  const propertyDescriptorMap: PropertyDescriptorMap = {\n    valueDescriptorMap: {\n      get(this: Controller) {\n        return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n          const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair)\n          const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key)\n          return Object.assign(result, { [attributeName]: valueDescriptor })\n        }, {} as ValueDescriptorMap)\n      }\n    }\n  }\n\n  return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n    return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair))\n  }, propertyDescriptorMap)\n}\n\n/** @hidden */\nexport function propertiesForValueDefinitionPair<T>(valueDefinitionPair: ValueDefinitionPair): PropertyDescriptorMap {\n  const definition = parseValueDefinitionPair(valueDefinitionPair)\n  const { type, key, name } = definition\n  const read = readers[type], write = writers[type] || writers.default\n\n  return {\n    [name]: {\n      get(this: Controller) {\n        const value = this.data.get(key)\n        if (value !== null) {\n          return read(value)\n        } else {\n          return definition.defaultValue\n        }\n      },\n\n      set(this: Controller, value: T | undefined) {\n        if (value === undefined) {\n          this.data.delete(key)\n        } else {\n          this.data.set(key, write(value))\n        }\n      }\n    },\n\n    [`has${capitalize(name)}`]: {\n      get(this: Controller): boolean {\n        return this.data.has(key)\n      }\n    }\n  }\n}\n\nexport type ValueDescriptor = {\n  type: ValueType,\n  key: string,\n  name: string,\n  defaultValue: any\n}\n\nexport type ValueDescriptorMap = { [attributeName: string]: ValueDescriptor }\n\nexport type ValueDefinitionMap = { [token: string]: ValueTypeConstant }\n\nexport type ValueDefinitionPair = [string, ValueTypeConstant]\n\nexport type ValueTypeConstant = typeof Array | typeof Boolean | typeof Number | typeof Object | typeof String\n\nexport type ValueType = \"array\" | \"boolean\" | \"number\" | \"object\" | \"string\"\n\nfunction parseValueDefinitionPair([token, typeConstant]: ValueDefinitionPair): ValueDescriptor {\n  const type = parseValueTypeConstant(typeConstant)\n  return valueDescriptorForTokenAndType(token, type)\n}\n\nfunction parseValueTypeConstant(typeConstant: ValueTypeConstant) {\n  switch (typeConstant) {\n    case Array:   return \"array\"\n    case Boolean: return \"boolean\"\n    case Number:  return \"number\"\n    case Object:  return \"object\"\n    case String:  return \"string\"\n  }\n  throw new Error(`Unknown value type constant \"${typeConstant}\"`)\n}\n\nfunction valueDescriptorForTokenAndType(token: string, type: ValueType) {\n  const key = `${dasherize(token)}-value`\n  return {\n    type,\n    key,\n    name: camelize(key),\n    get defaultValue() { return defaultValuesByType[type] }\n  }\n}\n\nconst defaultValuesByType = {\n  get array() { return [] },\n  boolean: false,\n  number: 0,\n  get object() { return {} },\n  string: \"\"\n}\n\ntype Reader = (value: string) => any\n\nconst readers: { [type: string]: Reader } = {\n  array(value: string): any[] {\n    const array = JSON.parse(value)\n    if (!Array.isArray(array)) {\n      throw new TypeError(\"Expected array\")\n    }\n    return array\n  },\n\n  boolean(value: string): boolean {\n    return !(value == \"0\" || value == \"false\")\n  },\n\n  number(value: string): number {\n    return parseFloat(value)\n  },\n\n  object(value: string): object {\n    const object = JSON.parse(value)\n    if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n      throw new TypeError(\"Expected object\")\n    }\n    return object\n  },\n\n  string(value: string): string {\n    return value\n  }\n}\n\ntype Writer = (value: any) => string\n\nconst writers: { [type: string]: Writer } = {\n  default: writeString,\n  array: writeJSON,\n  object: writeJSON\n}\n\nfunction writeJSON(value: any) {\n  return JSON.stringify(value)\n}\n\nfunction writeString(value: any) {\n  return `${value}`\n}\n","import { ClassPropertiesBlessing } from \"./class_properties\"\nimport { Constructor } from \"./constructor\"\nimport { Context } from \"./context\"\nimport { TargetPropertiesBlessing } from \"./target_properties\"\nimport { ValuePropertiesBlessing, ValueDefinitionMap } from \"./value_properties\"\n\nexport type ControllerConstructor = Constructor<Controller>\n\nexport class Controller {\n  static blessings = [ ClassPropertiesBlessing, TargetPropertiesBlessing, ValuePropertiesBlessing ]\n  static targets: string[] = []\n  static values: ValueDefinitionMap = {}\n\n  readonly context: Context\n\n  constructor(context: Context) {\n    this.context = context\n  }\n\n  get application() {\n    return this.context.application\n  }\n\n  get scope() {\n    return this.context.scope\n  }\n\n  get element() {\n    return this.scope.element\n  }\n\n  get identifier() {\n    return this.scope.identifier\n  }\n\n  get targets() {\n    return this.scope.targets\n  }\n\n  get classes() {\n    return this.scope.classes\n  }\n\n  get data() {\n    return this.scope.data\n  }\n\n  initialize() {\n    // Override in your subclass to set up initial controller state\n  }\n\n  connect() {\n    // Override in your subclass to respond when the controller is connected to the DOM\n  }\n\n  disconnect() {\n    // Override in your subclass to respond when the controller is disconnected from the DOM\n  }\n}\n","export * from \"@stimulus/core\"\n","export * from \"@stimulus/webpack-helpers\"\n","// eslint-disable-next-line\nimport * as Turbo from '@hotwired/turbo'\nimport { Application } from 'stimulus'\nimport { definitionsFromContext } from 'stimulus/webpack-helpers'\n\nconst application = Application.start()\nconst context = require.context('./controllers', true, /\\.js$/)\napplication.load(definitionsFromContext(context))","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}